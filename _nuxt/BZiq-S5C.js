import{_ as Y}from"./CgQ5lQtw.js";import{g as I,r as P,k as w,z as Z,s as tt,c as C,o as b,a as o,p as at,a4 as U,d as S,t as k,_ as D,ad as G,F as q,h as A,n as $,b as N,w as K,e as O}from"./CEJX9E6Q.js";import{F as et}from"./CIo5sv1j.js";const st={style:{position:"relative",display:"inline-block"}},ot=["width","height"],nt=I({__name:"CalorieChart",props:{addCalories:{type:Number,default:0},totalValue:{type:Number,default:3e3},targetMin:{type:Number,default:2e3},targetMax:{type:Number,default:2300},goalGap:{type:Number,default:.5},size:{type:Number,default:240},strokeWidth:{type:Number,default:30},duration:{type:Number,default:500}},setup(F){const a=F,u=P(null),d=P(0),f=P(null),g=w(()=>a.addCalories/a.totalValue*100),y=w(()=>[a.targetMin/a.totalValue*100,a.targetMax/a.totalValue*100]),m=Math.PI*2*.6,i=Math.PI/180*(-90-m*180/Math.PI/2),r=(t,e,s,p,h,_)=>{const c=new Path2D;c.moveTo(e+Math.cos(h)*p,e+Math.sin(h)*p),c.arc(e,e,p,h,_),c.lineTo(e+Math.cos(_)*s,e+Math.sin(_)*s),c.arc(e,e,s,_,h,!0),c.closePath(),t.save(),t.shadowColor="rgba(255, 255, 255, 0.5)",t.shadowBlur=10,t.fillStyle="rgba(255,255,255,0.9)",t.fill(c),t.restore(),t.fillStyle="rgba(255,255,255,1)",t.lineWidth=4,t.strokeStyle="rgba(255,255,255,1)",t.stroke(c),t.fill(c)},n=(t,e)=>{e=Math.min(e,100);const s=a.size/2,p=s-a.strokeWidth/2,h=p-a.strokeWidth/2,_=p+a.strokeWidth/2;t.clearRect(0,0,a.size,a.size);const[c,M]=y.value,T=a.goalGap,E=c+T,W=M-T,j=i+m*(E/100),x=i+m*(W/100),B=i+m*(e/100),L=(H,J)=>{const Q=i+m*(H/100),X=i+m*(J/100),z=t.createRadialGradient(s,s,h,s,s,_);z.addColorStop(0,"rgba(255,255,255,0.6)"),z.addColorStop(1,"rgba(255,255,255,0.6)"),t.beginPath(),t.arc(s,s,p,Q,X),t.strokeStyle=z,t.lineWidth=a.strokeWidth,t.lineCap="round",t.stroke()};L(0,c),L(M,100);const R=a.targetMax/a.totalValue*100;let V="#4C7FF7";e>30&&e<=R?V="#4C7FF7":e>R&&(V="#C92F2F"),t.strokeStyle=V,t.lineWidth=a.strokeWidth,t.lineCap="round",e<=E?(t.beginPath(),t.arc(s,s,p,i,B),t.stroke()):e>=W?(t.beginPath(),t.arc(s,s,p,i,i+m*(c/100)),t.stroke(),t.beginPath(),t.arc(s,s,p,i+m*(M/100),B),t.stroke()):(t.beginPath(),t.arc(s,s,p,i,i+m*(c/100)),t.stroke()),r(t,s,h,_,j,x)},l=()=>{const t=a.size/2,e=t-a.strokeWidth/2,[s,p]=y.value,h=(s+p)/2,_=i+m*(h/100),c=t+Math.cos(_)*(e+12),M=t+Math.sin(_)*(e+12);f.value={x:c,y:M}},v=(t,e,s)=>{const p=performance.now(),h=_=>{const c=Math.min((_-p)/s,1),M=t+(e-t)*c;d.value=M;const T=u.value.getContext("2d");n(T,M),c<1&&requestAnimationFrame(h)};requestAnimationFrame(h)};return Z(()=>[a.addCalories,a.targetMin,a.targetMax],()=>{l(),v(0,g.value,a.duration)},{immediate:!0}),tt(()=>{l(),v(0,g.value,a.duration)}),(t,e)=>(b(),C("div",st,[o("canvas",{ref_key:"canvasRef",ref:u,width:F.size,height:F.size},null,8,ot),f.value?(b(),C("div",{key:0,class:"calorie-tooltip",style:U({position:"absolute",left:f.value.x+50+"px",top:f.value.y-20+"px",transform:"translate(-50%, -50%)",background:"#444",color:"#fff",padding:"0.6rem 1rem",fontSize:"1.2rem",textAlign:"center",borderRadius:"0.8rem 0.8rem 0.8rem 0",boxShadow:"0 0.5rem 0.5rem 0 rgba(0, 0, 0, 0.03)",whiteSpace:"nowrap"})},[e[0]||(e[0]=S(" 목표 구간")),e[1]||(e[1]=o("br",null,null,-1)),S(" "+k(a.targetMin.toLocaleString())+" ~ "+k(a.targetMax.toLocaleString()),1)],4)):at("",!0)]))}}),lt=D(nt,[["__scopeId","data-v-d924c29c"]]),it={class:"food-intake-dashboard"},rt={class:"date-box"},dt={class:"bar"},ct={class:"date-num"},ut={class:"chart-container"},pt={class:"chart-wrap"},mt=I({__name:"FoodIntakeDashboard",setup(F){const a=P(!1),u=()=>{a.value=!a.value},d=[{date:"10",today:!1,progress:.3},{date:"11",today:!1,progress:.45},{date:"12",today:!1,progress:.6},{date:"13",today:!1,progress:.75},{date:"14",today:!1,progress:.2},{date:"15",today:!1,progress:.5},{date:"16",today:!0,progress:.9}];return(f,g)=>(b(),C("div",it,[o("div",{class:$(["intake-amount",{collapsed:!a.value}])},[o("button",{type:"button",class:"amount-tit",onClick:u},"섭취량 일일그래프"),o("div",rt,[(b(),C(q,null,A(d,y=>o("div",{key:y.date,class:$(["date-item",{today:y.today}])},[o("div",dt,[o("i",{class:"current-bar",style:U({height:a.value?y.progress*100+"%":"0%"})},null,4)]),o("span",ct,k(y.date),1)],2)),64))])],2),g[1]||(g[1]=G('<div class="calories-status" data-v-c4486343><div class="status-item bmr" data-v-c4486343><strong class="info-value" data-v-c4486343>1,487</strong><span class="info-txt" data-v-c4486343>기초대사량</span></div><div class="status-item burned-calories" data-v-c4486343><strong class="info-value" data-v-c4486343>780</strong><span class="info-txt" data-v-c4486343>소모칼로리</span></div><div class="status-item calorie-goal" data-v-c4486343><strong class="info-value" data-v-c4486343>2,267</strong><span class="info-txt" data-v-c4486343>목표칼로리</span></div></div>',1)),o("div",ut,[o("div",pt,[N(lt,{"add-calories":500})]),g[0]||(g[0]=G('<div class="chart-info" data-v-c4486343><div class="chart-txt" data-v-c4486343><span class="time" data-v-c4486343>16:30 기준</span><strong class="value" data-v-c4486343>2000</strong><span class="value-txt" data-v-c4486343>현재 섭취칼로리</span></div></div>',1))])]))}}),ft=D(mt,[["__scopeId","data-v-c4486343"]]),gt={breakfast:"ico-sun","morning-snack":"ico-apple",lunch:"ico-sunset","afternoon-snack":"ico-coffee",dinner:"ico-crescent","night-snack":"ico-bat"},vt={breakfast:"아침식사","morning-snack":"오전 간식",lunch:"점심식사","afternoon-snack":"오후 간식",dinner:"저녁식사","night-snack":"야간 간식"},ht={class:"meal-plan-item"},_t={class:"meal-calories"},yt={class:"eat-time"},bt={class:"calories-num"},kt=["aria-label"],Ct={class:"menu-name"},Ft={class:"detail-info"},Mt={class:"amount"},Pt={class:"calories"},wt=["aria-label","onClick"],It=I({__name:"MealPlanItem",props:{mealType:{},mealTitle:{},foods:{},iconClass:{}},emits:["addFood","deleteFood"],setup(F,{emit:a}){const u=F,d=a,f=w(()=>u.iconClass||gt[u.mealType]),g=w(()=>u.mealTitle||vt[u.mealType]),y=w(()=>!u.foods||u.foods.length===0?0:u.foods.reduce((i,r)=>i+r.calories,0)),m=(i,r)=>{d("deleteFood",i,r,u.mealType)};return(i,r)=>(b(),C("div",ht,[o("div",_t,[o("strong",yt,[o("i",{class:$(["icon",f.value])},null,2),S(" "+k(g.value),1)]),o("div",{class:$(["total-calories",{"none-eat":y.value===0}])},[o("strong",bt,k(y.value),1),r[1]||(r[1]=S(" Kcal ")),o("button",{type:"button",class:"btn-add","aria-label":`${g.value} 메뉴 추가`,onClick:r[0]||(r[0]=(...n)=>i.handleAddFood&&i.handleAddFood(...n))},null,8,kt)],2)]),(b(!0),C(q,null,A(i.foods,(n,l)=>(b(),C("div",{key:n.id||l,class:"detail-menu"},[o("span",Ct,k(n.name),1),o("div",Ft,[o("span",Mt,k(n.quantity)+" / "+k(n.weight)+"g",1),o("strong",Pt,k(n.calories)+"kcal",1),o("button",{type:"button",class:"btn-del","aria-label":`${n.name} 삭제`,onClick:v=>m(n,l)},null,8,wt)])]))),128))]))}}),Tt=D(It,[["__scopeId","data-v-1e4d73b6"]]),St={class:"food-intake-info"},$t=I({__name:"FoodIntakeInfo",emits:["addFood","deleteFood","updateMealPlans"],setup(F,{expose:a,emit:u}){const d=P([{type:"breakfast",title:"아침식사",iconClass:"ico-sun",foods:[{id:1,name:"우유",quantity:1,weight:200,calories:130},{id:2,name:"우유",quantity:1,weight:200,calories:130},{id:3,name:"바나나",quantity:1,weight:200,calories:130}]},{type:"morning-snack",title:"오전 간식",iconClass:"ico-apple",foods:[{id:4,name:"우유",quantity:1,weight:200,calories:130}]},{type:"lunch",title:"점심식사",iconClass:"ico-sunset",foods:[{id:5,name:"우유",quantity:1,weight:200,calories:130}]},{type:"afternoon-snack",title:"오후 간식",iconClass:"ico-coffee",foods:[{id:6,name:"우유",quantity:1,weight:200,calories:130}]},{type:"dinner",title:"저녁식사",iconClass:"ico-crescent",foods:[{id:7,name:"우유",quantity:1,weight:200,calories:130}]},{type:"night-snack",title:"야간 간식",iconClass:"ico-bat",foods:[]}]),f=u,g=(r,n,l)=>{const v=d.value.findIndex(t=>t.type===l);v!==-1&&(d.value[v].foods.splice(n,1),f("deleteFood",r,l),f("updateMealPlans",d.value))};return a({addFoodToMeal:(r,n)=>{const l=d.value.findIndex(v=>v.type===r);l!==-1&&(d.value[l].foods.push(n),f("updateMealPlans",d.value))},updateMealFoods:(r,n)=>{const l=d.value.findIndex(v=>v.type===r);l!==-1&&(d.value[l].foods=n,f("updateMealPlans",d.value))},getTotalDailyCalories:()=>d.value.reduce((r,n)=>{const l=n.foods.reduce((v,t)=>v+t.calories,0);return r+l},0),mealPlans:d}),(r,n)=>(b(),C("div",St,[n[0]||(n[0]=o("h5",{class:"info-tit mb-13"},"오늘의 식단",-1)),N(et,{class:"gap-12"},{default:K(()=>[(b(!0),C(q,null,A(d.value,l=>(b(),O(Tt,{key:l.type,"meal-type":l.type,"meal-title":l.title,foods:l.foods,"icon-class":l.iconClass,onAddFood:r.handleAddFood,onDeleteFood:g},null,8,["meal-type","meal-title","foods","icon-class","onAddFood"]))),128))]),_:1})]))}}),Nt=D($t,[["__scopeId","data-v-30cf8953"]]),qt=I({__name:"foodIntake",setup(F){return(a,u)=>(b(),O(Y,{"show-back-button":!0,"page-title":"섭취음식"},{default:K(()=>[N(ft),N(Nt)]),_:1}))}});export{qt as default};
