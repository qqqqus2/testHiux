import{_ as P}from"./BVUeeunw.js";import{g as z,a9 as I,r as _,k as f,A as d,x as O,a2 as l,c as m,a as C,F as L,h as j,a5 as F,o as h,e as M,w as N,d as E,t as R,n as S,_ as U}from"./CbJ3mJef.js";const V={class:"line-tabs"},$=["onClick"],D=z({__name:"LineTabs",props:{tabs:{},activeKey:{}},emits:["tab-change"],setup(K,{emit:q}){const s=K,T=q,i=I(),r=_(),c=_(),B=(e,a)=>{if(s.activeKey!==void 0&&e.key){T("tab-change",e.key,e);return}!e.to&&e.key&&T("tab-change",e.key,e)},k=(e,a)=>{if(s.activeKey!==void 0)return e.key===s.activeKey;if(e.to){const n=i.path+(i.query&&Object.keys(i.query).length>0?"?"+new URLSearchParams(i.query).toString():""),t=n===e.to;return console.log("LineTabs isActive:",{tabTitle:e.title,tabTo:e.to,currentPath:i.path,currentFullPath:n,isActiveTab:t}),t}return a===0},W=f(()=>{if(s.activeKey!==void 0){const n=s.tabs.findIndex(t=>t.key===s.activeKey);return n>=0?n:0}const e=i.path+(i.query&&Object.keys(i.query).length>0?"?"+new URLSearchParams(i.query).toString():""),a=s.tabs.findIndex(n=>n.to===e);return a>=0?a:0}),b=f(()=>{const a=u.value,n=s.tabs.length,t=a/n;return t<100?100:t}),y=f(()=>{const a=u.value,n=s.tabs.length;return a/n<100}),w=f(()=>{const e=b.value,a=W.value*e;return{width:e+"px",left:a+"px"}}),x=()=>{if(!c.value||!y.value)return;const e=c.value,a=W.value,n=b.value,t=a*n,o=t+n,p=e.scrollLeft,A=p+e.clientWidth;t<p?e.scrollTo({left:t-20,behavior:"smooth"}):o>A&&e.scrollTo({left:o-e.clientWidth+20,behavior:"smooth"})},u=_(360);d(()=>[i.path,i.query],async()=>{s.activeKey===void 0&&(await l(),v(),x())},{immediate:!0}),d(()=>s.activeKey,async()=>{s.activeKey!==void 0&&(await l(),v(),x())},{immediate:!0}),d(()=>c.value,e=>{e&&new ResizeObserver(n=>{for(const t of n){const o=t.contentRect.width;u.value=o,setTimeout(()=>{g(!0)},50)}}).observe(e)}),d(()=>[u.value,y.value],async()=>{await l(),v()}),d(()=>b.value,async()=>{await l(),v()}),O(async()=>{await l(),c.value&&(u.value=c.value.clientWidth,g())});const g=(e=!1)=>{if(!c.value)return;const a=c.value;a.querySelectorAll(".tab-link").forEach(t=>{if(y.value)t.style.minWidth="10rem",t.style.width="10rem",t.style.flex="none";else{const o=100/s.tabs.length;t.style.minWidth="auto",t.style.width=`${o}%`,t.style.flex="1"}}),y.value?a.style.justifyContent="flex-start":a.style.justifyContent="space-around",v(e)},v=async(e=!1)=>{if(await l(),r.value){const a=w.value;e&&(r.value.style.transition="none"),r.value.style.left=a.left,r.value.style.width=a.width,e&&setTimeout(()=>{r.value&&(r.value.style.transition="")},50)}};return(e,a)=>{const n=P;return h(),m("div",V,[C("div",{ref_key:"tabsContainerRef",ref:c,class:"tabs-container"},[(h(!0),m(L,null,j(s.tabs,(t,o)=>(h(),m(L,{key:t.key||t.to||o},[t.to?(h(),M(n,{key:0,to:t.to,class:S([{active:k(t,o)},"tab-link"])},{default:N(()=>[E(R(t.title),1)]),_:2},1032,["to","class"])):(h(),m("button",{key:1,onClick:p=>B(t),class:S([{active:k(t,o)},"tab-link"])},R(t.title),11,$))],64))),128)),C("div",{ref_key:"activeBarRef",ref:r,class:"tab-active-bar",style:F(w.value)},null,4)],512)])}}}),J=U(D,[["__scopeId","data-v-a2767c3b"]]);export{J as L};
