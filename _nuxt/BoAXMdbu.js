import{g as W,c as d,o as u,a,n as ot,_ as U,r,p as b,d as D,e as V,u as o,b as it,F as I,h as B,t as M,B as ut,l as rt,y as ct,ab as H,j as dt,a5 as ht,a2 as F}from"./CbJ3mJef.js";import{u as vt,E as pt}from"./rx7MIXUA.js";const gt={class:"toolbar"},ft=["disabled","title"],mt=W({__name:"EditorToolbar",props:{editor:{},hashtag:{},star:{},healthData:{},imageCount:{}},emits:["image-upload","hashtag","star","health-data"],setup(A){return(c,i)=>(u(),d("div",gt,[a("button",{class:ot(["toolbar-btn",{disabled:(c.imageCount||0)>=5}]),disabled:(c.imageCount||0)>=5,title:(c.imageCount||0)>=5?"ìµœëŒ€ 5ê°œì˜ ì´ë¯¸ì§€ê¹Œì§€ ì—…ë¡œë“œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.":"ì´ë¯¸ì§€ ì—…ë¡œë“œ",onClick:i[0]||(i[0]=h=>c.$emit("image-upload"))}," ðŸ“· ",10,ft),a("button",{class:"toolbar-btn",onClick:i[1]||(i[1]=h=>c.$emit("hashtag"))},"#"),a("button",{class:"toolbar-btn",onClick:i[2]||(i[2]=h=>c.$emit("star"))},"â­"),a("button",{class:"toolbar-btn",onClick:i[3]||(i[3]=h=>c.$emit("health-data"))},"â¤ï¸")]))}}),yt=U(mt,[["__scopeId","data-v-e97e6db1"]]),bt={class:"editor-container"},_t={key:1,class:"health-section"},kt={class:"editor-content-wrapper"},Ct={class:"editor-main"},St={class:"hashtag-container"},wt=["onClick"],$t={key:0,class:"hashtag-input-container"},Ht={key:1,class:"star-section"},Rt={class:"star-container"},Tt={class:"star-rating"},Et=["onMousemove","onTouchmove","onClick"],Dt={class:"star-score"},It={key:2,class:"image-sidebar"},Bt={class:"image-container"},Ft={class:"image-container"},Wt={class:"image-wrapper"},At=["src","alt"],Mt=["onClick"],Ut=W({__name:"Editor",setup(A){const{editor:c}=vt(),i=r(null),h=r([]),y=r(null),g=r([]),f=r(!1),n=r(""),w=r(!1),m=r(0),R=r(!1),v=r(0),_=r(!1),T=r({}),k=r(!1),z=()=>{var t;if(h.value.length>=5){alert("ìµœëŒ€ 5ê°œì˜ ì´ë¯¸ì§€ê¹Œì§€ ì—…ë¡œë“œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.");return}(t=i.value)==null||t.click()},N=t=>{h.value.splice(t,1)},L=t=>{const e=t.target.files;if(!e||e.length===0)return;const l=5-h.value.length;if(l<=0){alert("ìµœëŒ€ 5ê°œì˜ ì´ë¯¸ì§€ê¹Œì§€ ì—…ë¡œë“œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.");return}const p=Array.from(e).slice(0,l);e.length>p.length&&alert(`${p.length}ê°œì˜ ì´ë¯¸ì§€ë§Œ ì—…ë¡œë“œë©ë‹ˆë‹¤. (ìµœëŒ€ 5ê°œ ì œí•œ)`),p.forEach(C=>{const S=new FileReader;S.onload=()=>{const nt=S.result;h.value.push(nt)},S.readAsDataURL(C)}),i.value&&(i.value.value="")},j=()=>{w.value=!w.value,w.value?(f.value=!0,F(()=>{var t;(t=y.value)==null||t.focus(),n.value="",$()})):(g.value=[],f.value=!1,n.value="")},K=()=>{f.value||(f.value=!0,F(()=>{var t;(t=y.value)==null||t.focus(),$()}))},X=()=>{if(n.value.trim()){const t=n.value.trim().replace(/^#/,"");t&&t.length<=10&&!g.value.includes(t)&&g.value.push(t)}n.value="",f.value=!1},E=()=>{if(n.value.trim()){const t=n.value.trim().replace(/^#/,"");t&&t.length<=10&&!g.value.includes(t)&&g.value.push(t)}n.value="",F(()=>{var t;(t=y.value)==null||t.focus(),$()})},x=()=>{n.value="",f.value=!1},P=()=>{if(n.value.endsWith(" ")){n.value=n.value.trim(),E();return}$()},$=()=>{if(y.value){const t=y.value,e=n.value||"";if(e.length===0)t.style.width="10px";else{const s=document.createElement("span"),l=getComputedStyle(t);s.style.visibility="hidden",s.style.position="absolute",s.style.fontSize=l.fontSize,s.style.fontWeight=l.fontWeight,s.style.fontFamily=l.fontFamily,s.style.whiteSpace="pre",s.textContent=e,document.body.appendChild(s);const p=s.offsetWidth;document.body.removeChild(s),t.style.width=`${p+8}px`}}},q=()=>{n.value===""&&g.value.length>0&&g.value.pop()},G=t=>{g.value.splice(t,1)},J=()=>{_.value=!_.value,_.value?R.value=!0:(m.value=0,R.value=!1,v.value=0)},O=()=>{_.value=!1,m.value=0,R.value=!1,v.value=0},Q=(t,e)=>{const s=t.target.getBoundingClientRect(),l=t.clientX-s.left,p=s.width,C=l<p/2;v.value=C?e-.5:e},Y=()=>{v.value=0},Z=(t,e)=>{t.preventDefault();const s=t.touches[0],l=t.target.getBoundingClientRect(),p=s.clientX-l.left,C=l.width,S=p<C/2;v.value=S?e-.5:e},tt=()=>{v.value>0&&(m.value=v.value)},et=t=>{m.value=v.value>0?v.value:t},at=t=>{const e=v.value>0?v.value:m.value;return t<=e?"100%":t-.5<=e?"50%":"0%"},st=()=>{k.value=!k.value,k.value||(T.value={})},lt=()=>{k.value=!1,T.value={}};return(t,e)=>(u(),d("div",null,[e[7]||(e[7]=a("h1",null,"TipTap ì—ë””í„°",-1)),e[8]||(e[8]=a("p",{class:"description"},[D("í•´ì‹œíƒœê·¸ : ìµœëŒ€ 10ìž, #ê³¼ ê³µë°± ì œì™¸ ëª¨ë“  ë¬¸ìž í—ˆìš© "),a("br"),D("ì—”í„°ë˜ëŠ” ìŠ¤íŽ˜ì´ìŠ¤ë°”ë¡œ ìƒì„±")],-1)),e[9]||(e[9]=a("p",{class:"description"},"ë³„ì  : ìµœëŒ€ 5ì (0.5ì  ë‹¨ìœ„)",-1)),e[10]||(e[10]=a("p",{class:"description"},"ì´ë¯¸ì§€ : ìµœëŒ€ 5ê°œ ìŠ¤ì™€ì´í”„ ê¸°ëŠ¥ ì œê³µ",-1)),e[11]||(e[11]=a("p",{class:"description"},"ê±´ê°• ë°ì´í„° : ì¶”í›„ ì¶”ê°€ ì˜ˆì • (ê¸°íš ì•ˆë‚˜ì˜´)",-1)),a("div",bt,[o(c)?(u(),V(yt,{key:0,editor:o(c),hashtag:o(g),star:o(m),"health-data":o(T),"image-count":o(h).length,onImageUpload:z,onHashtag:j,onStar:J,onHealthData:st},null,8,["editor","hashtag","star","health-data","image-count"])):b("",!0),o(k)?(u(),d("div",_t,[a("div",{class:"health-header"},[e[1]||(e[1]=a("h3",{class:"health-title"},"ê±´ê°• ë°ì´í„°",-1)),a("button",{class:"health-close",onClick:lt},"Ã—")]),e[2]||(e[2]=a("div",{class:"health-container"},[a("p",{class:"health-placeholder"},"ê±´ê°• ë°ì´í„° ìš”ì†Œë“¤")],-1))])):b("",!0),a("div",kt,[a("div",Ct,[it(o(pt),{editor:o(c)},null,8,["editor"]),a("input",{ref_key:"fileInputRef",ref:i,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:L},null,544)])])]),o(w)?(u(),d("div",{key:0,class:"hashtag-section",onClick:K},[a("div",St,[(u(!0),d(I,null,B(o(g),(s,l)=>(u(),d("span",{key:l,class:"hashtag-item"},[D(" #"+M(s)+" ",1),a("button",{class:"hashtag-delete",onClick:ut(p=>G(l),["stop"])},"Ã—",8,wt)]))),128)),o(f)?(u(),d("div",$t,[e[3]||(e[3]=a("span",{class:"hashtag-hash"},"#",-1)),rt(a("input",{ref_key:"hashtagInputRef",ref:y,"onUpdate:modelValue":e[0]||(e[0]=s=>dt(n)?n.value=s:null),type:"text",class:"hashtag-input",maxlength:"9",onKeydown:[H(E,["enter"]),H(E,["space"]),H(q,["backspace"]),H(x,["esc"])],onInput:P,onBlur:X},null,544),[[ct,o(n)]])])):b("",!0)])])):b("",!0),o(_)?(u(),d("div",Ht,[a("div",{class:"star-header"},[e[4]||(e[4]=a("h3",{class:"star-title"},"ë³„ì ",-1)),a("button",{class:"star-close",onClick:O},"Ã—")]),a("div",Rt,[a("div",Tt,[(u(),d(I,null,B(5,s=>a("div",{key:s,class:"star-wrapper",onMousemove:l=>Q(l,s),onMouseleave:Y,onTouchmove:l=>Z(l,s),onTouchend:tt,onClick:l=>et(s)},[e[5]||(e[5]=a("div",{class:"star-bg"},"â˜†",-1)),a("div",{class:"star-fill",style:ht({width:at(s)})},"â˜…",4)],40,Et)),64))]),a("div",Dt,M(o(m).toFixed(1)),1)])])):b("",!0),o(h).length>0?(u(),d("div",It,[a("div",Bt,[a("div",Ft,[(u(!0),d(I,null,B(o(h),(s,l)=>(u(),d("div",{key:l,class:"image-item"},[a("div",Wt,[a("img",{src:s,alt:`ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ${l+1}`,class:"uploaded-image"},null,8,At),a("button",{class:"image-delete-btn",onClick:p=>N(l)},e[6]||(e[6]=[a("i",{class:"ri-close-fill"},null,-1)]),8,Mt)])]))),128))])])])):b("",!0)]))}}),Vt=U(Ut,[["__scopeId","data-v-26d27cef"]]),Lt=W({__name:"index",setup(A){return(c,i)=>(u(),V(Vt))}});export{Lt as default};
