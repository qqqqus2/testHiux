import{g as z,aw as G,at as I,r as m,k as h,s as L,a6 as O,c as a,o,a as l,p as W,F as d,h as p,a4 as $,t as R,u as K,_ as U}from"./DZksMEen.js";const X={class:"sleep-timeline-container"},j={class:"y-axis-labels-wrapper"},q=["width","viewBox"],J={class:"sleep-category-backgrounds"},Q=["y","width","height","fill"],Y={class:"sleep-segments"},Z=["x","y","width","height","fill"],ee={class:"x-axis-labels"},te=["x"],se={class:"x-axis-grid"},ae=["x1","x2"],oe={key:0,class:"empty-data-container"},x=0,ne=0,re=0,le=184,g=208,v=6,ie=z({__name:"sleepPatternChart",props:{sleepData:{},chartMinTime:{},chartMaxTime:{}},setup(M){G(t=>({"396ccc2e":g+"px"}));const P=M,{sleepData:C,chartMinTime:y,chartMaxTime:B}=I(P),E=m([{phase:"각성",color:"#B9B9B9"},{phase:"렘 수면",color:"#9B48FF"},{phase:"얕은 수면",color:"#41BCF5"},{phase:"깊은 수면",color:"#243E8E"}]),_=m(["각성","렘 수면","얕은 수면","깊은 수면"]),i=m(0),F=h(()=>i.value-x-ne),H=h(()=>le),c=h(()=>H.value/_.value.length),D=h(()=>C.value.map(t=>{const s=E.value.find(e=>e.phase===t.phase);return{...t,color:s?s.color:"#000000"}})),S=t=>({각성:"#F4F4F4","렘 수면":"#F4EBFF","얕은 수면":"#DBF2FF","깊은 수면":"#E6ECFF"})[t]||"#ffffff",r=t=>{const s=B.value-y.value;if(s<=0)return x;const e=(t-y.value)/s;return x+e*F.value},b=t=>{const s=_.value.indexOf(t);return s===-1?0:re+s*c.value},k=h(()=>{const t=[],s=y.value,e=B.value,n=e-s,w=6,V=n/(w-1);for(let T=0;T<w;T++){const N=s+T*V;t.push({timestamp:N})}return t.length>0&&(t[t.length-1].timestamp=e),t}),A=t=>isNaN(t)||t<=0?"":new Date(t).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),f=m(null);let u=null;return L(()=>{f.value&&(i.value=f.value.getBoundingClientRect().width,u=new ResizeObserver(t=>{for(const s of t)s.contentRect&&(i.value=s.contentRect.width)}),u.observe(f.value))}),O(()=>{u&&(u.disconnect(),u=null)}),(t,s)=>(o(),a("div",X,[l("div",j,[(o(!0),a(d,null,p(_.value,(e,n)=>(o(),a("div",{key:"y-label-text-"+n,style:$({height:c.value-v+"px",lineHeight:c.value-v+"px",marginBottom:v+"px"}),class:"y-axis-label-item"},R(e),5))),128))]),l("div",{ref_key:"svgWrapperRef",ref:f,class:"svg-chart-wrapper"},[(o(),a("svg",{width:i.value,height:g,viewBox:`0 0 ${i.value} ${g}`,preserveAspectRatio:"none"},[l("g",J,[(o(!0),a(d,null,p(_.value,(e,n)=>(o(),a("rect",{key:"bg-rect-"+n,x,y:b(e),width:F.value,height:c.value-v,fill:S(e)},null,8,Q))),128))]),l("g",Y,[(o(!0),a(d,null,p(D.value,(e,n)=>(o(),a("rect",{key:"segment-"+n,x:r(e.startTime),y:b(e.phase),width:r(e.endTime)-r(e.startTime),height:c.value-v,fill:e.color},null,8,Z))),128))]),l("g",ee,[(o(!0),a(d,null,p(k.value,(e,n)=>(o(),a("text",{key:"x-label-"+n,x:r(e.timestamp)+20,y:g,"text-anchor":"middle","font-size":"12px",fill:"#959595"},R(A(e.timestamp)),9,te))),128))]),l("g",se,[(o(!0),a(d,null,p(k.value,(e,n)=>(o(),a("line",{key:"grid-line-"+n,x1:r(e.timestamp),y1:0,x2:r(e.timestamp),y2:g,stroke:"#B9B9B9","stroke-dasharray":"2 3"},null,8,ae))),128))])],8,q))],512),K(C).length?W("",!0):(o(),a("div",oe,"데이터가 충분하지 않아요"))]))}}),ue=U(ie,[["__scopeId","data-v-d151fbf2"]]);export{ue as s};
