import{g as T,k as C,c as y,o as p,b as i,w as g,a as o,t as w,p as j,F as k,m as q,_ as x,r as l,s as H,Z as Q,q as R,y as A}from"./D3dCSwSP.js";import{_ as J}from"./hUzsyyX8.js";import{F as L}from"./BAH8aADu.js";import{F as O}from"./CbGEY-IY.js";import{C as U}from"./BL64PohF.js";import{B as G}from"./DiR1gVtW.js";import{B as W}from"./CDaH-T2p.js";import{D as Z}from"./xmP2rKXe.js";import{B as z}from"./CxyWvWvF.js";import"./CeEUwjkG.js";/* empty css        *//* empty css        *//* empty css        */import"./D_ru3p0q.js";import"./yZrTKorN.js";/* empty css        */const K={class:"diary-detail-view"},X={class:"date-display mt-20 mb-24"},Y={class:"date-label"},ee={key:0,class:"emoji-box"},te={class:"daily-quote-box"},ae=["innerHTML"],se=["src","alt"],oe=["src","alt"],ie={key:1,class:"diary-images"},le=T({__name:"DiaryDetailView",props:{diary:{}},setup(S){const c={diaryDetail:{slidesPerView:1,spaceBetween:10,pagination:!0,navigation:!1,loop:!1,showSlideLength:!1,showPlayPauseButton:!1}},f=S,_=e=>e?e.replace(/<br\s*\/?>/gi," "):"",D=C(()=>{var d;if(!((d=f.diary)!=null&&d.date))return"마음 일기";const e=new Date(f.diary.date),a=e.getMonth()+1,t=e.getDate(),n=["일","월","화","수","목","금","토"][e.getDay()];return`${a}월 ${t}일 ${n}요일`}),v=C(()=>{var e;return((e=f.diary)==null?void 0:e.content)||""});return(e,a)=>(p(),y("section",K,[i(L,null,{default:g(()=>[o("div",X,[o("span",Y,w(D.value),1)])]),_:1}),i(L,{class:""},{default:g(()=>{var t,r,n,d;return[(r=(t=e.diary)==null?void 0:t.emoji)!=null&&r.src?(p(),y("div",ee,[(n=e.diary)!=null&&n.isDailyQuote?(p(),y(k,{key:0},[o("div",te,[a[1]||(a[1]=o("p",{class:"daily-quote-label"},"오늘 한마디",-1)),o("p",{class:"daily-quote-question",innerHTML:_(e.diary.dailyQuoteQuestion||"")},null,8,ae)]),o("img",{src:e.diary.emoji.src,alt:e.diary.emoji.label},null,8,se),o("p",null,"오늘 마음은 "+w(e.diary.emoji.label)+"!",1)],64)):(p(),y(k,{key:1},[o("img",{src:e.diary.emoji.src,alt:e.diary.emoji.label},null,8,oe),o("p",null,"오늘 마음은 "+w(e.diary.emoji.label)+"!",1)],64))])):j("",!0),i(O,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=b=>v.value=b),class:"diary-fieldset",placeholder:"편하게 마음속 이야기를 남겨보세요. 마음일기는 나만 볼 수 있어요.","max-length":999,disabled:!0},null,8,["modelValue"]),(d=e.diary)!=null&&d.images&&e.diary.images.length>0?(p(),y("div",ie,[i(U,q({slides:e.diary.images,"slide-type":"image"},c.diaryDetail,{class:"diary-image-swiper"}),null,16,["slides"])])):j("",!0),i(G,{class:"is-fixed"},{default:g(()=>[i(W,{"btn-type":"primary","element-type":"a",href:"/community/diary/list","aria-label":"확인",class:"lg w-full medium btn-sticky"})]),_:1})]}),_:1})]))}}),re=x(le,[["__scopeId","data-v-600f1278"]]),ke=T({__name:"index",setup(S){const c=A(),f=R(),_=l(new Date),D=l({src:"",label:""}),v=l(""),e=l(null),a=l(!1),t=l(null),r=l(!1),n=l(!1),d=l(""),b=C(()=>"마음일기"),M=()=>{try{const s=Number(f.params.diaryId),m=localStorage.getItem("diaryList");if(m){const u=JSON.parse(m).find($=>$.id===s);u?(e.value=u,_.value=new Date(u.date),D.value=u.emoji,v.value=u.content,t.value=u):(alert("다이어리를 찾을 수 없습니다."),c.push("/community/diary/list"))}}catch(s){console.error("다이어리 데이터 로드 실패:",s),alert("다이어리 데이터를 불러오는데 실패했습니다."),c.push("/community/diary/list")}},B=()=>{a.value=!a.value},I=()=>{a.value=!1,r.value=!0},N=()=>{r.value=!1,t.value=null},E=()=>{if(t.value){const s=localStorage.getItem("diaryList");if(s){const h=JSON.parse(s).filter(u=>u.id!==t.value.id);localStorage.setItem("diaryList",JSON.stringify(h)),console.log("다이어리 삭제:",t.value.id),r.value=!1,t.value=null,F("일기가 삭제되었습니다."),setTimeout(()=>{c.push("/community/diary/list")},1e3)}}},F=s=>{d.value=s,n.value=!0};function P(s){c.push({path:`/community/diary/${s.id}/edit`})}const V=Q("setAddTextClickHandler");return H(()=>{M(),V&&V(B)}),(s,m)=>(p(),y(k,null,[i(J,{"page-title":b.value,"show-back-button":!0,"has-menu":!0,"add-text-click-enabled":!0,"add-text":"","add-text-icon":"ico-menu","title-center":!0},{default:g(()=>[i(re,{diary:e.value},null,8,["diary"]),i(Z,{"is-show-bottom-modal":a.value,"is-show-confirm-modal":r.value,"selected-diary":t.value,onClose:B,onEdit:P,onShowDeleteConfirm:I,onConfirmDelete:E,onCancelDelete:N},null,8,["is-show-bottom-modal","is-show-confirm-modal","selected-diary"])]),_:1},8,["page-title"]),i(z,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=h=>n.value=h),type:"success",duration:3e3},{default:g(()=>[o("p",null,w(d.value),1)]),_:1},8,["modelValue"])],64))}});export{ke as default};
