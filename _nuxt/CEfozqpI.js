import{_ as Y}from"./CgQ5lQtw.js";import{D as F}from"./CoyJgX_R.js";import{g as w,r as v,k as _,z as K,s as j,c as f,o as i,a as d,e as y,p as B,d as M,t as p,F as N,h as L,n as P,m as q,w as T,a2 as G,_ as O,b as V}from"./CEJX9E6Q.js";import{_ as H}from"./CJS4WFyZ.js";import"./BXvq85OX.js";import"./KdBxPXdE.js";import"./BfJRWyju.js";import"./qGuR-Jn_.js";import"./Dk0J2JMS.js";import"./BOHLvpOl.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        */const J={class:"c-count-box"},Q={class:"select-option btn-type"},U=["onClick"],W=w({__name:"TotalCountDateRangeType",props:{count:{default:0},data:{default:()=>[]},selectOptions:{default:()=>[{label:"전체",key:"all",value:"all",action:"direct"},{label:"3개월",key:"3months",value:"3months",action:"direct"},{label:"6개월",key:"6months",value:"6months",action:"direct"},{label:"12개월",key:"12months",value:"12months",action:"direct"},{label:"직접설정",key:"custom",value:"custom",action:"modal"}]},activeOption:{default:"all"},modalTitle:{default:"조회기간"},showModal:{type:Boolean,default:!1},confirmButtonText:{default:"조회하기"},cancelButtonText:{default:"취소"},useCustomModal:{type:Boolean,default:!1},customFilterMode:{type:Boolean,default:!1}},emits:["filtered-data-change","period-change","option-change","custom-modal-confirm","update:activeOption","update:showModal"],setup(C,{emit:m}){const t=C,l=m,o=v(t.showModal),s=v(t.activeOption),n=v([]),u=_(()=>t.selectOptions),$=_(()=>t.count>0?t.count:n.value.length),h=e=>{if(!t.data||t.data.length===0){n.value=[];return}const a=new Date;switch(e){case"all":n.value=[...t.data];break;case"3months":n.value=k(3,a);break;case"6months":n.value=k(6,a);break;case"12months":n.value=k(12,a);break;default:n.value=[...t.data]}l("filtered-data-change",n.value),l("period-change",e)},k=(e,a)=>{const c=new Date(a.getFullYear(),a.getMonth()-e,a.getDate());return t.data.filter(r=>{const D=r.date||r.createdAt||r.created_at||r.timestamp;if(!D)return!1;const S=new Date(D);return S>=c&&S<=a})},R=(e,a)=>{var c,r;if(console.log("클릭된 옵션:",e),console.log("커스텀 필터 모드:",t.customFilterMode),console.log("커스텀 모달 사용:",t.useCustomModal),e.disabled){console.log("비활성화된 옵션");return}if(s.value=e.key||e.value||a,l("update:activeOption",s.value),t.customFilterMode){console.log("커스텀 필터링 모드 - 부모에게 이벤트 전달"),l("option-change",e,a),e.action==="modal"&&(console.log("모달 열기 시도"),x());return}e.action==="direct"?(h(e.key||((c=e.value)==null?void 0:c.toString())||"all"),console.log(`📅 ${e.label} 옵션 선택 - ${n.value.length}개 데이터 필터링 완료`)):e.action==="modal"?(console.log("모달 열기"),x()):h(e.key||((r=e.value)==null?void 0:r.toString())||"all")},x=()=>{console.log("모달 열기 함수 호출"),g()},g=()=>{console.log("모달 토글 - 현재 상태:",o.value),o.value=!o.value,console.log("모달 토글 - 변경 후 상태:",o.value),l("update:showModal",o.value)},b=()=>{o.value=!1,l("update:showModal",!1)},z=e=>{o.value=!1,l("update:showModal",!1),s.value="custom",I(e),console.log("📅 날짜 범위 선택 완료:",e,`- ${n.value.length}개 데이터`)},A=e=>{o.value=!1,l("update:showModal",!1),l("custom-modal-confirm",e),console.log("📅 커스텀 모달 확인:",e)},I=e=>{if(!t.data||t.data.length===0){n.value=[];return}n.value=t.data.filter(a=>{const c=a.date||a.createdAt||a.created_at||a.timestamp;if(!c)return!1;const r=new Date(c);return r>=e.startDate&&r<=e.endDate}),l("filtered-data-change",n.value),l("period-change","custom")},E=_(()=>({title:t.modalTitle,isShowCloseButton:!0,isShowCancelButton:!0,isShowConfirmButton:!0,confirmButtonText:t.confirmButtonText,cancelButtonText:t.cancelButtonText,disabledCancelButton:!1,disabledConfirmButton:!1,autoClose:!0,initialPeriodType:s.value==="3months"?"segment1":s.value==="6months"?"segment2":s.value==="12months"?"segment3":"segment4"}));return K(()=>t.data,e=>{var a;e&&e.length>0&&h(((a=s.value)==null?void 0:a.toString())||"all")},{immediate:!0}),K(()=>t.activeOption,e=>{e!==s.value&&(s.value=e,h((e==null?void 0:e.toString())||"all"))}),j(()=>{var e;t.data&&t.data.length>0&&h(((e=s.value)==null?void 0:e.toString())||"all")}),(e,a)=>(i(),f("div",J,[d("div",null,[a[0]||(a[0]=M(" 총 ")),d("strong",null,p($.value),1),a[1]||(a[1]=M("건 "))]),d("div",Q,[(i(!0),f(N,null,L(u.value,(c,r)=>(i(),f("button",{key:c.key,type:"button",class:P({"select-item":!0,active:c.key===s.value}),onClick:D=>R(c,r)},p(c.label),11,U))),128))]),e.useCustomModal?B("",!0):(i(),y(F,q({key:0,"is-visible":o.value},E.value,{onCancel:b,onConfirm:z,onClose:g}),null,16,["is-visible"])),e.useCustomModal?(i(),y(F,{key:1,"is-visible":o.value,title:e.modalTitle,"is-show-close-button":!0,"is-show-cancel-button":!1,"is-show-confirm-button":!1,onCancel:b,onClose:g},{content:T(()=>[G(e.$slots,"modal-content",{close:g,confirm:A,cancel:b},()=>[a[2]||(a[2]=d("div",{class:"default-modal-content"},[d("p",null,"커스텀 모달 내용을 여기에 추가하세요.")],-1))],!0)]),_:3},8,["is-visible","title"])):B("",!0)]))}}),X=O(W,[["__scopeId","data-v-2b80440a"]]),Z={class:"payment-wrap"},ee={class:"payment-time"},te={class:"item-name"},ae={class:"price"},oe={key:0,class:"no-data"},le=w({__name:"PaymentList",props:{data:{default:()=>[]}},setup(C){return(m,t)=>{const l=H;return i(),f("div",Z,[(i(!0),f(N,null,L(m.data,o=>(i(),y(l,{to:"./[id]",key:o.id,class:"payment-item"},{default:T(()=>[d("div",ee,p(o.date),1),d("div",te,[d("strong",null,p(o.name),1),M(" "+p(o.cardCompany),1)]),d("div",ae,[d("strong",{class:P({priceCancel:o.approved==="승인취소"})},p(o.price)+"원",3),d("span",{class:P(["price-result",{priceCancel:o.approved==="승인취소"}])},p(o.approved),3)])]),_:2},1024))),128)),m.data.length===0?(i(),f("div",oe,"해당 기간에 데이터가 없습니다.")):B("",!0)])}}}),ne=O(le,[["__scopeId","data-v-c5ce81df"]]),Ce=w({__name:"index",setup(C){const m=v("all"),t=v([]),l=v([{id:1,name:"55,000P 충전",date:"30초 전",price:"50,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인완료"},{id:2,name:"55,000P 충전",date:"19일 전",price:"30,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인완료"},{id:3,name:"55,000P 충전",date:"03.27",price:"100,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인완료"},{id:4,name:"55,000P 충전",date:"03.27",price:"1,000,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인완료"},{id:5,name:"55,000P 충전",date:"03.27",price:"50,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인취소"},{id:6,name:"55,000P 충전",date:"03.27",price:"50,000",cardCompany:"신용/체크카드 / KB국민",approved:"승인완료"}]),o=_(()=>t.value.length>0?t.value:l.value),s=u=>{t.value=u,console.log(`필터링 완료: ${u.length}개 데이터`)},n=u=>{m.value=u,console.log(`기간 변경: ${u}`)};return(u,$)=>(i(),y(Y,{"show-back-button":!0,"page-title":"결제내역","logo-type":"text"},{default:T(()=>[d("div",null,[V(X,{data:l.value,class:"pt-20 pb-20","active-option":m.value,"modal-title":"조회 기간 선택","confirm-button-text":"조회하기",onFilteredDataChange:s,onPeriodChange:n},null,8,["data","active-option"]),V(ne,{data:o.value},null,8,["data"])])]),_:1}))}});export{Ce as default};
