/* empty css        */import{_ as he}from"./hUzsyyX8.js";/* empty css        */import{S as me}from"./CC79UHPA.js";import{_ as K}from"./D_ru3p0q.js";import{g as I,r as i,z as pe,c as d,o as u,F as E,h as L,a as t,n as z,t as w,_ as A,s as G,a1 as W,b as $,w as B,e as j,p as x,T as O,u as v,d as fe,A as ge,l as be,x as _e,ab as U,j as ye,a4 as Ce,Z as ke,k as X,i as $e}from"./D3dCSwSP.js";import{u as we,E as Se}from"./DEtWHC6Z.js";import{F as Te}from"./CjDKoGy8.js";import{I as xe}from"./BOU7Zwqt.js";/* empty css        */import"./CDaH-T2p.js";import"./x_rD_Ya3.js";/* empty css        */const He={class:"category-selector"},Ve={class:"category-header"},Be={class:"category-title"},Ie={class:"tag-list"},Me=["onClick"],Re=I({__name:"SelectBoard",props:{modelValue:{type:String,default:""},categoriesData:{type:Array,required:!0}},emits:["update:modelValue","change","closeModal"],setup(b,{emit:m}){const h=b,n=m,l=i(h.modelValue),c=i(h.categoriesData);pe(()=>h.modelValue,s=>{l.value=s},{immediate:!0});const _=(s,f)=>{l.value=f.value,n("update:modelValue",f.value),n("change",{categoryName:s,optionLabel:f.label,combinedLabel:`${s} > ${f.label}`,value:f.value}),n("closeModal")};return(s,f)=>(u(),d("div",He,[(u(!0),d(E,null,L(c.value,p=>(u(),d("div",{key:p.id,class:"category-group"},[t("div",Ve,[t("i",{class:z(["icon",p.icon])},null,2),t("h3",Be,w(p.name),1)]),t("div",Ie,[(u(!0),d(E,null,L(p.options,C=>(u(),d("button",{key:C.value,class:z(["tag-button",{selected:l.value===C.value}]),onClick:g=>_(p.name,C)},w(C.label),11,Me))),128))])]))),128))]))}}),De=A(Re,[["__scopeId","data-v-78b702d9"]]),Ee={key:0},Le={key:1},Ae=I({__name:"SelectTypeBtn",props:{legend:{type:String,default:""},displayLabel:{type:String,default:""},placeholder:{type:String,default:"게시판을 선택해주세요"},isModalOpen:{type:Boolean,default:!1}},emits:["click"],setup(b,{emit:m}){const h=m;return(n,l)=>(u(),d("div",null,[t("legend",null,w(b.legend),1),t("button",{class:z(["category-select-btn",{"is-placeholder":!b.displayLabel,"is-modal-open":b.isModalOpen}]),onClick:l[0]||(l[0]=c=>h("click"))},[b.displayLabel?(u(),d("span",Ee,w(b.displayLabel),1)):(u(),d("span",Le,w(b.placeholder),1))],2)]))}}),Fe=A(Ae,[["__scopeId","data-v-723a3702"]]),Ue={class:"tooltip-wrap"},We=I({__name:"ToolbatBtnTooltip",props:{text:{type:String,default:""}},setup(b){return(m,h)=>(u(),d("div",Ue,w(b.text),1))}}),Z=A(We,[["__scopeId","data-v-e443d9c0"]]),ze={class:"toolbar-wrap"},je={class:"toolbar"},Pe=["disabled","title"],Ne=I({__name:"EditorToolbarCustom",props:{editor:{},hashtag:{},star:{},healthData:{},imageCount:{}},emits:["image-upload","hashtag","star","health-data"],setup(b){const m=i(!1),h=i(!1);return G(()=>{m.value=!0,setTimeout(()=>{m.value=!1,W(()=>{h.value=!0,setTimeout(()=>{h.value=!1},2500)})},2500)}),(n,l)=>(u(),d("div",ze,[t("div",je,[t("button",{class:z(["toolbar-btn icon icon-photo",{disabled:(n.imageCount||0)>=5}]),disabled:(n.imageCount||0)>=5,title:(n.imageCount||0)>=5?"최대 5개의 이미지까지 업로드할 수 있습니다.":"이미지 업로드",onClick:l[0]||(l[0]=c=>n.$emit("image-upload"))},null,10,Pe),t("button",{class:"toolbar-btn icon icon-hashtag",onClick:l[1]||(l[1]=c=>n.$emit("hashtag"))}),t("button",{class:"toolbar-btn icon icon-rating",onClick:l[2]||(l[2]=c=>n.$emit("star"))},[$(O,{name:"fade"},{default:B(()=>[m.value?(u(),j(Z,{key:0,text:"별점 평가를 잊지마세요"})):x("",!0)]),_:1})]),t("button",{class:"toolbar-btn icon heart-beep-bw",onClick:l[3]||(l[3]=c=>n.$emit("health-data"))},[$(O,{name:"fade"},{default:B(()=>[h.value?(u(),j(Z,{key:0,text:"여기를 눌러서 건강 데이터를 추가할 수 있어요"})):x("",!0)]),_:1})])]),l[4]||(l[4]=t("button",{type:"button",class:"regist"},"등록하기",-1))]))}}),qe=A(Ne,[["__scopeId","data-v-0030321e"]]),Ke={class:"editor-wrap"},Oe={class:"editor-container"},Xe={key:1,class:"health-section"},Ze={class:"editor-content-wrapper"},Ge={class:"editor-main"},Je={class:"hashtag-container"},Qe=["onClick"],Ye={key:0,class:"hashtag-input-container"},et={key:1,class:"star-section"},tt={class:"star-container"},at={class:"star-rating"},lt=["onMousemove","onTouchmove","onClick"],st={class:"star-score"},ot={key:2,class:"image-sidebar"},nt={class:"image-container"},it={class:"image-container"},ut={class:"image-wrapper"},ct=["src","alt"],rt=["onClick"],dt=I({__name:"EditorCustom",setup(b){const{editor:m}=we(),h=i(null),n=i([]),l=i(null),c=i([]),_=i(!1),s=i(""),f=i(!1),p=i(0),C=i(!1),g=i(0),H=i(!1),M=i({}),V=i(!1),P=()=>{var e;if(n.value.length>=5){alert("최대 5개의 이미지까지 업로드할 수 있습니다.");return}(e=h.value)==null||e.click()},N=e=>{n.value.splice(e,1)},S=e=>{const a=e.target.files;if(!a||a.length===0)return;const r=5-n.value.length;if(r<=0){alert("최대 5개의 이미지까지 업로드할 수 있습니다.");return}const k=Array.from(a).slice(0,r);a.length>k.length&&alert(`${k.length}개의 이미지만 업로드됩니다. (최대 5개 제한)`),k.forEach(R=>{const D=new FileReader;D.onload=()=>{const ve=D.result;n.value.push(ve)},D.readAsDataURL(R)}),h.value&&(h.value.value="")},y=()=>{f.value=!f.value,f.value?(_.value=!0,W(()=>{var e;(e=l.value)==null||e.focus(),s.value="",F()})):(c.value=[],_.value=!1,s.value="")},T=()=>{_.value||(_.value=!0,W(()=>{var e;(e=l.value)==null||e.focus(),F()}))},J=()=>{if(s.value.trim()){const e=s.value.trim().replace(/^#/,"");e&&e.length<=10&&!c.value.includes(e)&&c.value.push(e)}s.value="",_.value=!1},q=()=>{if(s.value.trim()){const e=s.value.trim().replace(/^#/,"");e&&e.length<=10&&!c.value.includes(e)&&c.value.push(e)}s.value="",W(()=>{var e;(e=l.value)==null||e.focus(),F()})},Q=()=>{s.value="",_.value=!1},Y=()=>{if(s.value.endsWith(" ")){s.value=s.value.trim(),q();return}F()},F=()=>{if(l.value){const e=l.value,a=s.value||"";if(a.length===0)e.style.width="10px";else{const o=document.createElement("span"),r=getComputedStyle(e);o.style.visibility="hidden",o.style.position="absolute",o.style.fontSize=r.fontSize,o.style.fontWeight=r.fontWeight,o.style.fontFamily=r.fontFamily,o.style.whiteSpace="pre",o.textContent=a,document.body.appendChild(o);const k=o.offsetWidth;document.body.removeChild(o),e.style.width=`${k+8}px`}}},ee=()=>{s.value===""&&c.value.length>0&&c.value.pop()},te=e=>{c.value.splice(e,1)},ae=()=>{H.value=!H.value,H.value?C.value=!0:(p.value=0,C.value=!1,g.value=0)},le=()=>{H.value=!1,p.value=0,C.value=!1,g.value=0},se=(e,a)=>{const o=e.target.getBoundingClientRect(),r=e.clientX-o.left,k=o.width,R=r<k/2;g.value=R?a-.5:a},oe=()=>{g.value=0},ne=(e,a)=>{e.preventDefault();const o=e.touches[0],r=e.target.getBoundingClientRect(),k=o.clientX-r.left,R=r.width,D=k<R/2;g.value=D?a-.5:a},ie=()=>{g.value>0&&(p.value=g.value)},ue=e=>{p.value=g.value>0?g.value:e},ce=e=>{const a=g.value>0?g.value:p.value;return e<=a?"100%":e-.5<=a?"50%":"0%"},re=()=>{V.value=!V.value,V.value||(M.value={})},de=()=>{V.value=!1,M.value={}};return(e,a)=>(u(),d("div",Ke,[t("div",Oe,[v(m)?(u(),j(qe,{key:0,editor:v(m),hashtag:v(c),star:v(p),"health-data":v(M),"image-count":v(n).length,onImageUpload:P,onHashtag:y,onStar:ae,onHealthData:re},null,8,["editor","hashtag","star","health-data","image-count"])):x("",!0),v(V)?(u(),d("div",Xe,[t("div",{class:"health-header"},[a[1]||(a[1]=t("h3",{class:"health-title"},"건강 데이터",-1)),t("button",{class:"health-close",onClick:de},"×")]),a[2]||(a[2]=t("div",{class:"health-container"},[t("p",{class:"health-placeholder"},"건강 데이터 요소들")],-1))])):x("",!0),t("div",Ze,[t("div",Ge,[$(v(Se),{editor:v(m)},null,8,["editor"]),t("input",{ref_key:"fileInputRef",ref:h,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:S},null,544)])])]),v(f)?(u(),d("div",{key:0,class:"hashtag-section",onClick:T},[t("div",Je,[(u(!0),d(E,null,L(v(c),(o,r)=>(u(),d("span",{key:r,class:"hashtag-item"},[fe(" #"+w(o)+" ",1),t("button",{class:"hashtag-delete icon close",onClick:ge(k=>te(r),["stop"])},null,8,Qe)]))),128)),v(_)?(u(),d("div",Ye,[a[3]||(a[3]=t("span",{class:"hashtag-hash"},"#",-1)),be(t("input",{ref_key:"hashtagInputRef",ref:l,"onUpdate:modelValue":a[0]||(a[0]=o=>ye(s)?s.value=o:null),type:"text",class:"hashtag-input",maxlength:"9",onKeydown:[U(q,["enter"]),U(q,["space"]),U(ee,["backspace"]),U(Q,["esc"])],onInput:Y,onBlur:J},null,544),[[_e,v(s)]])])):x("",!0)])])):x("",!0),v(H)?(u(),d("div",et,[t("div",{class:"star-header"},[a[4]||(a[4]=t("h3",{class:"star-title"},"별점",-1)),t("button",{class:"star-close icon close",onClick:le})]),t("div",tt,[t("div",at,[(u(),d(E,null,L(5,o=>t("div",{key:o,class:"star-wrapper",onMousemove:r=>se(r,o),onMouseleave:oe,onTouchmove:r=>ne(r,o),onTouchend:ie,onClick:r=>ue(o)},[a[5]||(a[5]=t("div",{class:"star-bg"},null,-1)),t("div",{class:"star-fill",style:Ce({width:ce(o)})},null,4)],40,lt)),64))]),t("div",st,w(v(p).toFixed(1)),1)])])):x("",!0),v(n).length>0?(u(),d("div",ot,[t("div",nt,[t("div",it,[(u(!0),d(E,null,L(v(n),(o,r)=>(u(),d("div",{key:r,class:"image-item"},[t("div",ut,[t("img",{src:o,alt:`업로드된 이미지 ${r+1}`,class:"uploaded-image"},null,8,ct),t("button",{class:"image-delete-btn",onClick:k=>N(r)},a[6]||(a[6]=[t("i",{class:"ri-close-fill"},null,-1)]),8,rt)])]))),128))])])])):x("",!0)]))}}),vt=A(dt,[["__scopeId","data-v-f394a287"]]),ht={class:"flex flex-col gap-12"},mt={class:"text-left"},Ht=I({__name:"create",setup(b){const m=i(""),h=i(""),n=i(!1),l=i(""),c=i({community:!1,board:!1,title:!1,editor:!1}),_=i(""),s=i(!1),f=ke("setCloseHandler");G(()=>{f&&f(()=>{s.value=!0})});const p=X(()=>l.value.trim()?"현재 게시글 수정을 그만두시나요??":"현재 게시글 작성을 그만두시나요?"),C=X(()=>l.value.trim()||_.value||m.value?"정하신 게시글 내용이 사라집니다.":" 작성중인 게시글 내용이 모두 사라집니다."),g=i([{id:"communication",name:"소통하기",icon:"ico-coffee",options:[{value:"free_topic",label:"자유주제"},{value:"review",label:"후기/리뷰"},{value:"how_to_use",label:"활용법"},{value:"question",label:"질문"}]},{id:"co_writing",name:"같이쓰기",icon:"ico-team",options:[{value:"contest",label:"공모전"},{value:"study",label:"스터디"},{value:"challenge",label:"챌린지"},{value:"project",label:"프로젝트"}]}]),H=()=>{n.value=!0},M=S=>{m.value=S.value,h.value=S.combinedLabel,c.value.board=!1},V=()=>{n.value=!1},P=S=>{if(_.value===S.value){c.value.community=!1;return}_.value=S.value,m.value="",h.value="",c.value.community=!1},N=()=>{console.log("작성 취소됨"),s.value=!1,$e(-1)};return(S,y)=>(u(),j(he,{"page-title":"글 쓰기","show-back-button":!0,"is-transparent":!0,"has-close-btn":!0},{default:B(()=>[$(Te,{class:"gap-12 mt-24"},{default:B(()=>[$(me,{"modal-title":"게시글 카테고리",label:"커뮤니티","select-placeholder":"커뮤니티를 선택해주세요","is-invalid":c.value.community,"valid-text":"커뮤니티를 선택해주세요","cancel-button-text":"선택","is-show-cancel-btn":!1,"custom-opts":[{value:"자유주제",label:"자유주제"},{value:"후기/리뷰",label:"후기/리뷰"},{value:"활용법",label:"활용법"},{value:"질문",label:"질문"}],onChange:P},null,8,["is-invalid"]),$(Fe,{legend:"게시판","display-label":h.value,placeholder:"게시판을 선택해주세요","is-modal-open":n.value,"is-invalid":c.value.board,"valid-text":"게시판을 선택해주세요",onClick:H},null,8,["display-label","is-modal-open","is-invalid"]),$(xe,{modelValue:l.value,"onUpdate:modelValue":y[0]||(y[0]=T=>l.value=T),placeholder:"제목을 입력해주세요",class:"has-no-border","is-invalid":c.value.title,"valid-text":"제목을 입력해주세요"},null,8,["modelValue","is-invalid"]),$(vt)]),_:1}),$(K,{"is-visible":n.value,title:"게시글 카테고리","is-show-cancel-button":!1,"is-show-confirm-button":!1,"is-show-close-button":!0,onClose:V},{content:B(()=>[$(De,{modelValue:m.value,"onUpdate:modelValue":y[1]||(y[1]=T=>m.value=T),"categories-data":g.value,onChange:M,onCloseModal:y[2]||(y[2]=T=>n.value=!1)},null,8,["modelValue","categories-data"])]),_:1},8,["is-visible"]),$(K,{"is-visible":s.value,title:v(p),content:v(C),"is-show-cancel-button":!0,"is-show-confirm-button":!0,"cancel-button-text":"취소","confirm-button-text":"네",onClose:y[3]||(y[3]=T=>s.value=!1),onCancel:y[4]||(y[4]=T=>s.value=!1),onConfirm:N},{content:B(()=>[t("div",ht,[t("p",mt,w(v(C)),1)])]),_:1},8,["is-visible","title","content"])]),_:1}))}});export{Ht as default};
