import{k as E,ah as L,E as H,ai as g,ae as z,aj as I,a6 as G,Z as W,z as Z,ak as $,r as x,D as P,al as q,a1 as J,am as Q,u as B,an as X,g as Y,ao as K,s as k,e as A,w as ee,o as w,a as y,l as ae,j as te,x as se,c as T,F as re,h as ne,t as V,i as ie}from"./D3dCSwSP.js";import{c as ce}from"./CeEUwjkG.js";import{_ as le}from"./hUzsyyX8.js";import{C as ue}from"./CHL-HVhB.js";import"./CBkOwUYj.js";const oe={trailing:!0};function de(e,a=25,u={}){if(u={...oe,...u},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let n,t,c=[],s,v;const m=(D,i)=>(s=fe(e,D,i),s.finally(()=>{if(s=null,u.trailing&&v&&!t){const h=m(D,v);return v=null,h}}),s);return function(...D){return s?(u.trailing&&(v=D),s):new Promise(i=>{const h=!t&&u.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const l=u.leading?n:m(this,D);for(const d of c)d(l);c=[]},a),h?(n=m(this,D),i(n)):c.push(i)})}}async function fe(e,a,u){return await e.apply(a,u)}const _e=e=>e==="defer"||e===!1;function me(...e){var d;const a=typeof e[e.length-1]=="string"?e.pop():void 0;ve(e[0],e[1])&&e.unshift(a);let[u,n,t={}]=e;const c=E(()=>L(u));if(typeof c.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const s=H();t.server??(t.server=!0),t.default??(t.default=he),t.getCachedData??(t.getCachedData=j),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=g.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,s._asyncData[c.value];const v={cause:"initial",dedupe:t.dedupe};(d=s._asyncData[c.value])!=null&&d._init||(v.cachedData=t.getCachedData(c.value,s,{cause:"initial"}),s._asyncData[c.value]=N(s,c.value,n,t,v.cachedData));const m=s._asyncData[c.value];m._deps++;const D=()=>s._asyncData[c.value].execute(v),i=t.server!==!1&&s.payload.serverRendered;{let r=function(f){const _=s._asyncData[f];_!=null&&_._deps&&(_._deps--,_._deps===0&&(_==null||_._off()))};const o=z();if(o&&i&&t.immediate&&!o.sp&&(o.sp=[]),o&&!o._nuxtOnBeforeMountCbs){o._nuxtOnBeforeMountCbs=[];const f=o._nuxtOnBeforeMountCbs;I(()=>{f.forEach(_=>{_()}),f.splice(0,f.length)}),G(()=>f.splice(0,f.length))}const C=o&&(o._nuxtClientOnly||W(ce,!1));i&&s.isHydrating&&(m.error.value||m.data.value!=null)?(m.pending.value=!1,m.status.value=m.error.value?"error":"success"):o&&(!C&&s.payload.serverRendered&&s.isHydrating||t.lazy)&&t.immediate?o._nuxtOnBeforeMountCbs.push(D):t.immediate&&D();const S=X(),U=Z([c,...t.watch||[]],([f],[_])=>{var M,O;if((f||_)&&f!==_){const F=((M=s._asyncData[_])==null?void 0:M.data.value)!==g.value;_&&r(_);const p={cause:"initial",dedupe:t.dedupe};(O=s._asyncData[f])!=null&&O._init||(p.cachedData=t.getCachedData(f,s,{cause:"initial"}),s._asyncData[f]=N(s,f,n,t,p.cachedData)),s._asyncData[f]._deps++,(t.immediate||F)&&s._asyncData[f].execute(p)}else m._execute({cause:"watch",dedupe:t.dedupe})},{flush:"sync"});S&&$(()=>{U(),r(c.value)})}const h={data:b(()=>{var r;return(r=s._asyncData[c.value])==null?void 0:r.data}),pending:b(()=>{var r;return(r=s._asyncData[c.value])==null?void 0:r.pending}),status:b(()=>{var r;return(r=s._asyncData[c.value])==null?void 0:r.status}),error:b(()=>{var r;return(r=s._asyncData[c.value])==null?void 0:r.error}),refresh:(...r)=>s._asyncData[c.value].execute(...r),execute:(...r)=>s._asyncData[c.value].execute(...r),clear:()=>R(s,c.value)},l=Promise.resolve(s._asyncDataPromises[c.value]).then(()=>h);return Object.assign(l,h),l}function b(e){return E({get(){var a;return(a=e())==null?void 0:a.value},set(a){const u=e();u&&(u.value=a)}})}function ve(e,a){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof a=="function")}function R(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=g.errorValue),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=g.errorValue,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function De(e,a){const u={};for(const n of a)u[n]=e[n];return u}function N(e,a,u,n,t){var h;(h=e.payload._errors)[a]??(h[a]=g.errorValue);const c=n.getCachedData!==j,s=u,v=n.deep?x:P,m=t!=null,D=e.hook("app:data:refresh",async l=>{(!l||l.includes(a))&&await i.execute({cause:"refresh:hook"})}),i={data:v(m?t:n.default()),pending:P(!m),error:q(e.payload._errors,a),status:P("idle"),execute:(l={})=>{if(e._asyncDataPromises[a]){if(_e(l.dedupe??n.dedupe))return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}if(l.cause==="initial"||e.isHydrating){const r="cachedData"in l?l.cachedData:n.getCachedData(a,e,{cause:l.cause??"refresh:manual"});if(r!=null)return e.payload.data[a]=i.data.value=r,i.error.value=g.errorValue,i.status.value="success",Promise.resolve(r)}i.pending.value=!0,i.status.value="pending";const d=new Promise((r,o)=>{try{r(s(e))}catch(C){o(C)}}).then(async r=>{if(d.cancelled)return e._asyncDataPromises[a];let o=r;n.transform&&(o=await n.transform(r)),n.pick&&(o=De(o,n.pick)),e.payload.data[a]=o,i.data.value=o,i.error.value=g.errorValue,i.status.value="success"}).catch(r=>{if(d.cancelled)return e._asyncDataPromises[a];i.error.value=Q(r),i.data.value=B(n.default()),i.status.value="error"}).finally(()=>{d.cancelled||(i.pending.value=!1,delete e._asyncDataPromises[a])});return e._asyncDataPromises[a]=d,e._asyncDataPromises[a]},_execute:de((...l)=>i.execute(...l),0,{leading:!0}),_default:n.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var l;D(),(l=e._asyncData[a])!=null&&l._init&&(e._asyncData[a]._init=!1),c||J(()=>{var d;(d=e._asyncData[a])!=null&&d._init||(R(e,a),i.execute=()=>Promise.resolve(),i.data.value=g.value)})}};return i}const he=()=>g.value,j=(e,a,u)=>{if(a.isHydrating)return a.payload.data[e];if(u.cause!=="refresh:manual"&&u.cause!=="refresh:hook")return a.static.data[e]},ye={style:{display:"flex","flex-direction":"column",gap:"2rem"}},ge={style:{display:"flex","flex-direction":"column"}},be={style:{display:"flex","flex-direction":"column",gap:"0.75rem"}},Be=Y({__name:"agentManagement",async setup(e){let a,u;const n=x(""),t=x([]),c=l=>{const d=l.target;n.value=d.value},s=()=>{const l=ue.open({isVisible:!0,confirmButtonText:"삭제",content:"해당 설계사를 삭제하시겠어요?"});l&&console.log(l)},{data:v,error:m,pending:D}=([a,u]=K(()=>me("managed-users",()=>getManagedUsers())),a=await a,u(),a),i=E(()=>n.value?t.value.filter(l=>l.name.includes(n.value)):t.value),h=()=>ie("/insu/claim/subrogation/inputAgentInfo");return k(()=>{t.value=v.value}),(l,d)=>(w(),A(le,null,{default:ee(()=>[y("div",ye,[y("div",ge,[ae(y("input",{"onUpdate:modelValue":d[0]||(d[0]=r=>te(n)?n.value=r:null),style:{padding:"0.25rem 0.75rem",border:"1px solid gainsboro","border-radius":"0.25rem"},placeholder:"설계사 이름",onInput:c},null,544),[[se,B(n)]])]),y("div",be,[(w(!0),T(re,null,ne(B(i),r=>(w(),T("div",{key:r.id,style:{display:"flex","justify-content":"space-between",padding:"1rem","border-radius":"10px",border:"1px solid #b0b0b0"}},[y("div",null,[y("div",null,V(r.name),1),y("div",null,V(r.phoneNum),1)]),y("button",{style:{padding:"2px 12px","border-radius":"20px","background-color":"red",color:"white"},onClick:s}," 삭제 ")]))),128))])]),y("div",{style:{display:"flex","justify-content":"center","margin-top":"2rem"}},[y("button",{style:{"background-color":"#b0b0b0",padding:"0.75rem 1rem","border-radius":"10px",width:"150px"},onClick:h}," 설계사 추가등록 ")])]),_:1}))}});export{Be as default};
