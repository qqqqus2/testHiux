import{S as N}from"./BXvq85OX.js";import{I as R}from"./KdBxPXdE.js";import{g as Y,r as c,k as f,z as x,s as L,a6 as U,e as z,c as g,p as b,n as K,a as n,t as v,b as T,a7 as j,o as r,a1 as q,_ as A}from"./CEJX9E6Q.js";const G={class:"c-modal-inner"},H={class:"c-modal-header"},J={id:"modalBottomTitle",class:"c-modal-title"},O={class:"c-modal-body"},Q={class:"date-range-tabs"},W={class:"date-input-section"},X={class:"c-modal-footer"},Z=["disabled"],ee={class:"text"},te=["disabled"],ae={class:"text"},oe=Y({__name:"DateRangeModal",props:{initialStartDate:{default:null},initialEndDate:{default:null},initialPeriodType:{default:"segment4"},title:{default:"ê¸°ê°„ ì„ íƒ"},addTitle:{},addTitleClass:{},isVisible:{type:Boolean,default:!1},isShowCloseButton:{type:Boolean,default:!0},isShowCancelButton:{type:Boolean,default:!0},isShowConfirmButton:{type:Boolean,default:!0},confirmButtonText:{default:"í™•ì¸"},cancelButtonText:{default:"ì·¨ì†Œ"},disabledCancelButton:{type:Boolean,default:!1},disabledConfirmButton:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0}},emits:["confirm","cancel","close","update:startDate","update:endDate"],setup(S,{emit:_}){const o=S,d=_,s=c(o.initialPeriodType||"segment4"),l=c(""),i=c(""),D=c(""),M=c([{title:"3ê°œì›”",key:"segment1"},{title:"6ê°œì›”",key:"segment2"},{title:"12ê°œì›”",key:"segment3"},{title:"ì§ì ‘ì„¤ì •",key:"segment4"}]),B=f(()=>s.value==="segment4"),u=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),y=String(e.getDate()).padStart(2,"0");return`${t}.${a}.${y}`},m=e=>{if(!e)return null;const t=e.replace(/\./g,"-"),a=new Date(t);return isNaN(a.getTime())?null:a},h=()=>{const e=new Date;let t,a=new Date(e);switch(s.value){case"segment1":t=new Date(e.getFullYear(),e.getMonth()-3,e.getDate());break;case"segment2":t=new Date(e.getFullYear(),e.getMonth()-6,e.getDate());break;case"segment3":t=new Date(e.getFullYear(),e.getMonth()-12,e.getDate());break;default:o.initialStartDate?t=new Date(o.initialStartDate):t=new Date(e.getFullYear(),e.getMonth(),1),o.initialEndDate&&(a=new Date(o.initialEndDate));break}l.value=u(t),i.value=u(a)};f(()=>{if(!l.value||!i.value)return"";const e=m(l.value),t=m(i.value);if(!e||!t)return"";const a=u(e),y=u(t);return`${a} ~ ${y}`});const k=()=>{switch(s.value){case"segment1":return"ìµœê·¼ 3ê°œì›”";case"segment2":return"ìµœê·¼ 6ê°œì›”";case"segment3":return"ìµœê·¼ 12ê°œì›”";default:return"ì‚¬ìš©ì ì§€ì •"}},E=e=>{s.value=e,h(),console.log(`ğŸ“… ê¸°ê°„ íƒ­ ë³€ê²½: ${k()}`)},F=()=>{const e=document.body;D.value=e.style.overflow,e.style.overflow="hidden"},w=()=>{const e=document.body;e.style.overflow=D.value};x(()=>o.isVisible,async e=>{if(e){s.value=o.initialPeriodType||"segment4",h(),F(),await q();const t=document.getElementById("cDateRangePicker");t&&t.focus()}else w()});const C=e=>{e.key==="Escape"&&o.isVisible&&p()};L(()=>{document.addEventListener("keydown",C)}),U(()=>{document.removeEventListener("keydown",C),w()});const p=()=>{o.autoClose&&d("close")},V=()=>{d("cancel")},P=()=>{const e=m(l.value),t=m(i.value);if(!e||!t){console.warn("ìœ íš¨í•˜ì§€ ì•Šì€ ë‚ ì§œì…ë‹ˆë‹¤.");return}if(e>t){console.warn("ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ ëŠ˜ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}const a={startDate:e,endDate:t,periodType:s.value==="segment1"?"3months":s.value==="segment2"?"6months":s.value==="segment3"?"12months":"custom",label:k()};d("confirm",a),d("update:startDate",e),d("update:endDate",t),console.log("ğŸ“… ì„ íƒëœ ê¸°ê°„:",a)},$=f(()=>o.disabledCancelButton),I=f(()=>o.disabledConfirmButton);return(e,t)=>(r(),z(j,{to:"body"},[e.isVisible?(r(),g("div",{key:0,id:"cDateRangePicker",class:K(["c-modal bottom date-range-modal",[{"is-show":e.isVisible}]]),"aria-describedby":"modalBottomTitle",tabindex:"-1",role:"dialog","aria-modal":"true"},[n("div",{class:"c-dim",onClick:p}),n("div",G,[n("div",H,[n("strong",J,v(e.title),1),e.isShowCloseButton?(r(),g("button",{key:0,type:"button",class:"c-modal-close-btn","aria-label":"ë‹«ê¸°",onClick:p},t[2]||(t[2]=[n("i",{class:"icon close"},null,-1)]))):b("",!0)]),n("div",O,[n("div",Q,[T(N,{tabs:M.value,"active-key":s.value,onTabChange:E},null,8,["tabs","active-key"])]),n("div",W,[T(R,{"from-date":l.value,"onUpdate:fromDate":t[0]||(t[0]=a=>l.value=a),"to-date":i.value,"onUpdate:toDate":t[1]||(t[1]=a=>i.value=a),placeholder:"ì‹œì‘ì¼",placeholder2:"ì¢…ë£Œì¼",readonly:!B.value,disabled:!B.value},null,8,["from-date","to-date","readonly","disabled"])])]),n("div",X,[e.isShowCancelButton?(r(),g("button",{key:0,type:"button",class:"c-modal-btn cancel",disabled:$.value,onClick:V},[n("span",ee,v(e.cancelButtonText),1)],8,Z)):b("",!0),e.isShowConfirmButton?(r(),g("button",{key:1,type:"button",class:"c-modal-btn confirm",disabled:I.value,onClick:P},[n("span",ae,v(e.confirmButtonText),1)],8,te)):b("",!0)])])],2)):b("",!0)]))}}),ie=A(oe,[["__scopeId","data-v-aacff04b"]]);export{ie as D};
