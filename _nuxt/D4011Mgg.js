import{_ as Se,r as b,k as f,z as Me,s as $e,c as d,o as h,a as i,b as O,p as w,n as $,F,d as x,t as k,h as B,A as j,w as Ye}from"./D3dCSwSP.js";import{_ as be}from"./D_ru3p0q.js";import{H as Fe}from"./kYhlhnVA.js";/* empty css        */const _e={class:"calendar-sheet"},He={class:"calendar-wrapper"},Ce={class:"week-number"},Ie={key:1,class:"calendar-navigation"},Pe={key:2,class:"calendar-content"},Ve=["onClick"],Ke={class:"date-cell"},xe={key:0,class:"schedule-dot"},Be=["onClick"],Ee=["onClick"],Ne={key:0,class:"check-icon"},Oe={key:2,class:"debt-price"},je={key:3,class:"time-picker-section"},Te={class:"month-picker-content"},Ae={class:"year-picker"},Re={class:"year-navigation"},Le={class:"year-display"},We={class:"month-grid"},ze=["onClick"],Ue={__name:"DatePicker",props:{modelValue:{type:Date,default:null},scheduled:{type:[String,Array],default:()=>[],validator:v=>!!(typeof v=="string"||Array.isArray(v))},disabledDates:{type:Array,default:()=>[]},showHeader:{type:Boolean,default:!0},showNavigation:{type:Boolean,default:!0},enableMonthPicker:{type:Boolean,default:!0},vitalRecord:{type:Boolean,default:!1},vitalHomework:{type:Boolean,default:!1},vitalHomeworkData:{type:Object,default:()=>({})},homeworkStartDate:{type:[String,Date],default:null},homeworkEndDate:{type:[String,Date],default:null},heartDiary:{type:Boolean,default:!1},vitalData:{type:Object,default:()=>({})},heartDiaryData:{type:Object,default:()=>({})},showCalendar:{type:Boolean,default:!0},showTimePicker:{type:Boolean,default:!1},weekMode:{type:Boolean,default:!1},weekBaseDate:{type:[Date,String],default:null},isShowDebtPrice:{type:Boolean,default:!1},debtPriceData:{type:Object,default:()=>({})},defaultHour:{type:Number,default:0,validator:v=>v>=0&&v<=23},defaultMinute:{type:Number,default:0,validator:v=>v>=0&&v<=59},minuteStep:{type:Number,default:1,validator:v=>v>0&&v<=60}},emits:["update:modelValue","emoji-click","date-status-change","diary-click","time-change","scheduled-date-click","homework-click"],setup(v,{emit:T}){const n=v,g=T,o=b(new Date),m=b(n.modelValue),I=b(!1),S=b(null),M=b({hour:n.defaultHour,minute:n.defaultMinute}),A=f(()=>{const e=n.scheduled;return!e||e.length===0?[]:typeof e=="string"?e.split(",").map(t=>t.trim()).filter(t=>t).map(t=>{const a=parseInt(t);return isNaN(a)?null:a}).filter(t=>t!==null):Array.isArray(e)?e.map(t=>{if(typeof t=="number")return t;if(typeof t=="string"&&!t.includes("-")){const a=parseInt(t);return isNaN(a)?null:a}if(typeof t=="string"&&t.includes("-")){const a=new Date(t);return a.getFullYear()===o.value.getFullYear()&&a.getMonth()===o.value.getMonth()?a.getDate():null}return t instanceof Date&&t.getFullYear()===o.value.getFullYear()&&t.getMonth()===o.value.getMonth()?t.getDate():null}).filter(t=>t!==null&&t>=1&&t<=31):[]}),P=e=>A.value.includes(e);Me(()=>n.modelValue,e=>{e&&(m.value=new Date(e),o.value=new Date(e.getFullYear(),e.getMonth(),1))},{immediate:!0}),f(()=>p.value-1);const R=[{name:"1월",code:"month-1"},{name:"2월",code:"month-2"},{name:"3월",code:"month-3"},{name:"4월",code:"month-4"},{name:"5월",code:"month-5"},{name:"6월",code:"month-6"},{name:"7월",code:"month-7"},{name:"8월",code:"month-8"},{name:"9월",code:"month-9"},{name:"10월",code:"month-10"},{name:"11월",code:"month-11"},{name:"12월",code:"month-12"}],y=f(()=>o.value.getFullYear()),p=f(()=>o.value.getMonth()+1),u=f(()=>{if(!n.weekMode)return null;const e=new Date(o.value),t=e.getDay(),a=e.getDate()-t;return new Date(e.getFullYear(),e.getMonth(),a)}),L=f(()=>{if(!n.weekMode||!u.value)return null;const e=new Date(u.value);return e.setDate(u.value.getDate()+6),e}),Y=f(()=>{if(n.weekMode&&u.value&&L.value){const r=[];for(let s=0;s<7;s++){const l=new Date(u.value);l.setDate(u.value.getDate()+s),r.push(l.getDate())}return r}const e=o.value.getFullYear(),t=o.value.getMonth(),a=new Date(e,t+1,0).getDate();return Array.from({length:a},(r,s)=>s+1)}),W=f(()=>{if(n.weekMode&&u.value)return 0;const e=o.value.getFullYear(),t=o.value.getMonth();return new Date(e,t,1).getDay()}),z=f(()=>n.weekMode&&u.value?(o.value.getMonth(),o.value.getFullYear(),0):W.value),U=e=>{if(M.value=e,m.value){const t=new Date(m.value);t.setHours(e.hour,e.minute,0,0),m.value=t,g("update:modelValue",t),g("time-change",{hour:e.hour,minute:e.minute,dateTime:t}),console.log(`⏰ 시간 변경: ${e.hour}:${String(e.minute).padStart(2,"0")}`)}},q=()=>{if(n.weekMode){const e=new Date(o.value);e.setDate(e.getDate()-7),o.value=e}else{const e=new Date(o.value);e.setMonth(e.getMonth()-1),o.value=e}},G=()=>{if(n.weekMode){const e=new Date(o.value);e.setDate(e.getDate()+7),o.value=e}else{const e=new Date(o.value);e.setMonth(e.getMonth()+1),o.value=e}},J=()=>{n.enableMonthPicker&&Q()},Q=()=>{S.value=p.value,I.value=!0},_=()=>{S.value=null,I.value=!1},X=e=>{S.value=e,console.log(`📅 임시 선택: ${y.value}년 ${e}월`)},Z=()=>{S.value?ae(S.value):_()},ee=()=>{const e=new Date(o.value);e.setFullYear(e.getFullYear()-1),o.value=e},te=()=>{const e=new Date(o.value);e.setFullYear(e.getFullYear()+1),o.value=e},ae=e=>{const t=new Date(o.value);t.setMonth(e-1),n.weekMode&&t.setDate(1),o.value=t,S.value=null,_(),console.log(`📅 ${y.value}년 ${e}월로 이동`)},ne=e=>{if(V(e)){console.log(`❌ 비활성화된 날짜입니다: ${y.value}년 ${p.value}월 ${e}일`);return}if(n.vitalHomework){const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`,l=n.vitalHomeworkData[s],c={date:new Date(o.value.getFullYear(),o.value.getMonth(),e),dateKey:s,hasHomework:!!l,homeworkInfo:l,status:H(e)};g("homework-click",c);return}if(P(e)){const t={date:new Date(o.value.getFullYear(),o.value.getMonth(),e),year:y.value,month:p.value,day:e};g("scheduled-date-click",t),console.log(`📌 스케줄된 날짜 클릭: ${y.value}년 ${p.value}월 ${e}일`)}if(n.vitalRecord){const t=fe(e),a={date:new Date(o.value.getFullYear(),o.value.getMonth(),e),status:t};g("date-status-change",a);return}if(n.heartDiary){const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`,l=n.heartDiaryData[s],c={date:new Date(o.value.getFullYear(),o.value.getMonth(),e),dateKey:s,hasDiary:!!l,diaryInfo:l};g("diary-click",c);return}oe(e)},oe=e=>{if(V(e)){console.log(`❌ 비활성화된 날짜입니다: ${y.value}년 ${p.value}월 ${e}일`);return}let t,a;if(n.weekMode&&u.value){const s=Y.value.indexOf(e);if(s!==-1){const l=new Date(u.value);l.setDate(u.value.getDate()+s),t=l.getFullYear(),a=l.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth();const r=n.showTimePicker?new Date(t,a,e,M.value.hour,M.value.minute):new Date(t,a,e);m.value=r,g("update:modelValue",r),n.showTimePicker?console.log(`📅 선택된 날짜/시간: ${r.getFullYear()}년 ${r.getMonth()+1}월 ${r.getDate()}일 ${String(M.value.hour).padStart(2,"0")}:${String(M.value.minute).padStart(2,"0")}`):console.log(`📅 선택된 날짜: ${r.getFullYear()}년 ${r.getMonth()+1}월 ${r.getDate()}일`)},le=e=>{if(!m.value)return!1;let t,a;if(n.weekMode&&u.value){const s=Y.value.indexOf(e);if(s!==-1){const l=new Date(u.value);l.setDate(u.value.getDate()+s),t=l.getFullYear(),a=l.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth();const r=new Date(t,a,e);return m.value.toDateString()===r.toDateString()},re=e=>{const t=new Date;let a,r;if(n.weekMode&&u.value){const l=Y.value.indexOf(e);if(l!==-1){const c=new Date(u.value);c.setDate(u.value.getDate()+l),a=c.getFullYear(),r=c.getMonth()}else a=o.value.getFullYear(),r=o.value.getMonth()}else a=o.value.getFullYear(),r=o.value.getMonth();const s=new Date(a,r,e);return t.toDateString()===s.toDateString()},V=e=>{let t,a;if(n.weekMode&&u.value){const s=Y.value.indexOf(e);if(s!==-1){const l=new Date(u.value);l.setDate(u.value.getDate()+s),t=l.getFullYear(),a=l.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth()}else t=o.value.getFullYear(),a=o.value.getMonth();const r=new Date(t,a,e);return n.disabledDates.some(s=>{if(s instanceof Date)return s.toDateString()===r.toDateString();if(typeof s=="string"){const[l,c,D]=s.split("-").map(Number);return l===t&&c===a+1&&D===e}return typeof s=="number"?s===e:!1})},E=e=>{const t=o.value.getFullYear(),a=o.value.getMonth();return new Date(t,a,e).getDay()},se=e=>E(e)===0,ue=e=>E(e)===6,ce=e=>{if(!n.vitalHomework||!n.homeworkStartDate||!n.homeworkEndDate)return!1;const t=o.value.getFullYear(),a=o.value.getMonth(),r=new Date(t,a,e);r.setHours(0,0,0,0);let s,l;return typeof n.homeworkStartDate=="string"?s=new Date(n.homeworkStartDate):s=new Date(n.homeworkStartDate),s.setHours(0,0,0,0),typeof n.homeworkEndDate=="string"?l=new Date(n.homeworkEndDate):l=new Date(n.homeworkEndDate),l.setHours(0,0,0,0),r>=s&&r<=l},ie=e=>{if(!n.vitalHomework||!n.homeworkStartDate)return!1;const t=o.value.getFullYear(),a=o.value.getMonth(),r=new Date(t,a,e);let s;return typeof n.homeworkStartDate=="string"?s=new Date(n.homeworkStartDate):s=n.homeworkStartDate,r.toDateString()===s.toDateString()},de=e=>{if(!n.vitalHomework||!n.homeworkEndDate)return!1;const t=o.value.getFullYear(),a=o.value.getMonth(),r=new Date(t,a,e);let s;return typeof n.homeworkEndDate=="string"?s=new Date(n.homeworkEndDate):s=n.homeworkEndDate,r.toDateString()===s.toDateString()},he=e=>{const t=H(e);return t?`homework-${t}`:""},H=e=>{if(!n.vitalHomework)return null;const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`,l=n.vitalHomeworkData[s];return l&&l.status||null},ve=(e,t)=>{t.preventDefault();const a=o.value.getFullYear(),r=String(o.value.getMonth()+1).padStart(2,"0"),s=String(e).padStart(2,"0"),l=`${a}-${r}-${s}`,c=new Date(a,o.value.getMonth(),e),D=n.vitalHomeworkData[l];g("homework-click",{date:c,dateKey:l,homeworkInfo:D||null,status:H(e),originalEvent:t}),console.log(`📋 건강 숙제 클릭: ${l}`,D)},N=e=>{if(!e||typeof e!="number")return"";const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`,l=n.debtPriceData[s];return!l||l===0?"":l.toLocaleString("ko-KR")},De=e=>{if(!e||typeof e!="number")return!1;const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`,l=n.debtPriceData[s];return l===0||l===void 0||l===null},ge=e=>{const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`;if(n.heartDiary){const l=n.heartDiaryData[s];return l?l.status||"emoji-diary":""}else{const l=n.vitalData[s];return l?l.status:""}},fe=e=>{if(!n.vitalRecord&&!n.heartDiary)return"no-data";const t=o.value.getFullYear(),a=String(o.value.getMonth()+1).padStart(2,"0"),r=String(e).padStart(2,"0"),s=`${t}-${a}-${r}`;if(n.heartDiary){const l=n.heartDiaryData[s];return l?l.status||"no-data":K(e)?"no-data":null}else{const l=n.vitalData[s];return l?l.status||"no-data":K(e)?"no-data":null}},K=e=>{if(!n.vitalRecord&&!n.heartDiary)return!1;const t=o.value.getFullYear(),a=o.value.getMonth(),r=new Date(t,a,e),s=new Date;if(s.setHours(0,0,0,0),n.heartDiary){const l=String(a+1).padStart(2,"0"),c=String(e).padStart(2,"0"),D=`${t}-${l}-${c}`,C=n.heartDiaryData[D];return!C&&r<=s?!0:(!C&&r>s,!1)}else{const l=Object.keys(n.vitalData).filter(pe=>n.vitalData[pe]).sort();if(l.length===0)return!1;const c=l[l.length-1],D=new Date(c);if(r>=D)return!1;const C=String(a+1).padStart(2,"0"),we=String(e).padStart(2,"0"),ke=`${t}-${C}-${we}`;return!n.vitalData[ke]}},me=(e,t)=>{t.preventDefault();const a=o.value.getFullYear(),r=String(o.value.getMonth()+1).padStart(2,"0"),s=String(e).padStart(2,"0"),l=`${a}-${r}-${s}`,c=new Date(a,o.value.getMonth(),e);if(n.heartDiary){const D=n.heartDiaryData[l];g("diary-click",{date:c,dateKey:l,diaryInfo:D||null,originalEvent:t})}else{const D=n.vitalData[l];g("emoji-click",{date:c,dateKey:l,vitalInfo:D||null,originalEvent:t})}},ye=f(()=>{if(!n.weekMode||!u.value)return 1;const e=o.value.getMonth(),t=o.value.getFullYear(),a=new Date(t,e,1),r=[];for(let l=0;l<7;l++){const c=new Date(u.value);c.setDate(u.value.getDate()+l),c.getMonth()===e&&c.getFullYear()===t&&r.push(c.getDate())}if(r.length===0)return 1;const s=Math.min(...r);return Math.ceil((s+a.getDay())/7)});return $e(()=>{if(n.weekMode){const e=n.weekBaseDate?new Date(n.weekBaseDate):new Date;o.value=e,n.modelValue&&(m.value=new Date(n.modelValue))}else n.modelValue?(o.value=new Date(n.modelValue),m.value=new Date(n.modelValue)):o.value=new Date}),(e,t)=>(h(),d("div",_e,[i("div",He,[n.showHeader?(h(),d("h2",{key:0,class:$(["year",{clickable:n.enableMonthPicker}]),onClick:J},[n.weekMode?(h(),d(F,{key:0},[x(k(y.value)+"년 "+k(p.value)+"월 ",1),i("span",Ce,k(ye.value)+"번째 주",1)],64)):(h(),d(F,{key:1},[x(k(y.value)+"년 "+k(p.value)+"월 ",1)],64))],2)):w("",!0),n.showNavigation?(h(),d("div",Ie,[i("button",{type:"button",class:"btn-prev",onClick:q}),i("button",{type:"button",class:"btn-next",onClick:G})])):w("",!0),n.showCalendar?(h(),d("div",Pe,[t[1]||(t[1]=i("ol",{class:"calendar-week"},[i("li",{class:"sunday"},"일"),i("li",null,"월"),i("li",null,"화"),i("li",null,"수"),i("li",null,"목"),i("li",null,"금"),i("li",{class:"saturday"},"토")],-1)),i("div",{class:$(["calendar-dates",{"week-mode":n.weekMode}])},[(h(!0),d(F,null,B(z.value,a=>(h(),d("div",{key:"empty-"+a,class:"empty-date"}))),128)),(h(!0),d(F,null,B(Y.value,a=>(h(),d("div",{key:a,class:$({selected:le(a),today:re(a),"disabled-day":V(a),"vital-record":n.vitalRecord,"heart-diary":n.heartDiary,"vital-homework":n.vitalHomework,"homework-start-date":ie(a),"homework-end-date":de(a),"homework-period":ce(a),"no-data":K(a),scheduled:P(a),sunday:se(a),saturday:ue(a),"debt-price-mode":n.isShowDebtPrice,"no-price":n.isShowDebtPrice&&De(a)}),onClick:r=>ne(a)},[i("span",Ke,[x(k(a)+" ",1),P(a)?(h(),d("span",xe)):w("",!0)]),n.vitalRecord||n.heartDiary?(h(),d("span",{key:0,class:$(["emoji",ge(a)]),onClick:j(r=>me(a,r),["stop"])},null,10,Be)):w("",!0),n.vitalHomework?(h(),d("span",{key:1,class:$(["homework-status",he(a)]),onClick:j(r=>ve(a,r),["stop"])},[H(a)==="completed"?(h(),d("span",Ne)):w("",!0)],10,Ee)):w("",!0),n.isShowDebtPrice&&N(a)?(h(),d("span",Oe,k(N(a)),1)):w("",!0)],10,Ve))),128))],2)])):w("",!0),n.showTimePicker?(h(),d("div",je,[O(Fe,{modelValue:M.value,"onUpdate:modelValue":t[0]||(t[0]=a=>M.value=a),"minute-step":n.minuteStep,"default-hour":n.defaultHour,"default-minute":n.defaultMinute,onChange:U},null,8,["modelValue","minute-step","default-hour","default-minute"])])):w("",!0)]),O(be,{"is-visible":I.value,title:"월 선택","is-show-cancel-button":!1,"is-show-confirm-button":!0,"auto-close":!0,"confirm-button-text":"확인",onClose:_,onCancel:_,onConfirm:Z},{content:Ye(()=>[i("div",Te,[i("div",Ae,[i("div",Re,[i("button",{type:"button",class:"btn-prev",onClick:ee}),i("h3",Le,k(y.value)+"년",1),i("button",{type:"button",class:"btn-next",onClick:te})])]),i("div",We,[(h(),d(F,null,B(R,(a,r)=>i("button",{key:r,type:"button",class:$(["month-item",{active:S.value===r+1}]),onClick:s=>X(r+1)},k(a.name),11,ze)),64))])])]),_:1},8,["is-visible"])]))}},Ze=Se(Ue,[["__scopeId","data-v-b1746543"]]);export{Ze as D};
