import{D as J}from"./UMyKphUi.js";import{g as K,r as D,k as v,z as S,c as u,a as c,b as Q,p as C,a4 as U,n as h,u as T,F as x,h as W,d as X,t as M,m as Z,o as d,a1 as _,_ as ee}from"./DZksMEen.js";/* empty css        */const te={class:"c-input"},ae={class:"c-inpType"},le=["for"],ne={key:0,class:"required-mark"},oe={key:1},re=["id","name","placeholder","value","readonly","disabled"],se=["id","name","placeholder","value","readonly","disabled"],ie={key:1,class:"feedback error"},ue={class:"text"},ce={key:2,class:"feedback error"},de=K({__name:"InputCalendarFromTo",props:{label:{type:String,default:""},name:{type:String,default:"calendar"},labelClass:{type:String,default:""},placeholder:{type:String,default:"YYYY.MM.DD"},placeholder2:{type:String,default:"YYYY.MM.DD"},fromDate:{type:String,default:""},toDate:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},size:{type:String,validator:a=>["lg","sm","normal"].includes(a),default:"normal"},showTimePicker:{type:Boolean,default:!1},defaultHour:{type:Number,default:0,validator:a=>a>=0&&a<=23},defaultMinute:{type:Number,default:0,validator:a=>a>=0&&a<=59},minuteStep:{type:Number,default:1,validator:a=>a>0&&a<=60},validText:{type:String,default:"기간을 선택해주세요"}},emits:["update:fromDate","update:toDate","validation-error","time-change"],setup(a,{emit:z}){const l=a,y=z,p=l.name,o=D("from"),r=D(l.fromDate),s=D(l.toDate),m=D(!1),H=v(()=>l.showTimePicker?"YYYY.MM.DD HH:MM":l.placeholder),N=v(()=>l.showTimePicker?"YYYY.MM.DD HH:MM":l.placeholder2),P=v(()=>l.label.includes("*")),V=v(()=>P.value?l.label.split(/([*])/).filter(e=>e!==""):[]);S(()=>l.fromDate,e=>{r.value=e},{immediate:!0}),S(()=>l.toDate,e=>{s.value=e},{immediate:!0});const k=v(()=>{if(!r.value||!s.value)return!1;const e=g(r.value),t=g(s.value);return!e||!t?!1:e>t}),g=e=>{if(!e)return null;try{let t=e;if(e.includes(" ")){const[i,f]=e.split(" ");t=`${i.replace(/\./g,"-")} ${f}`}else t=e.replace(/\./g,"-");const n=new Date(t);return isNaN(n.getTime())?null:n}catch{return null}},E=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");if(l.showTimePicker){const f=String(e.getHours()).padStart(2,"0"),F=String(e.getMinutes()).padStart(2,"0");return`${t}.${n}.${i} ${f}:${F}`}else return`${t}.${n}.${i}`},b=(e,t)=>{if(!e||!t)return!0;const n=g(e),i=g(t);if(!n||!i)return!0;const f=n<=i;return f||y("validation-error","시작일이 종료일보다 늦을 수 없습니다"),f},R=v(()=>({title:o.value==="from"?"시작일 선택":"종료일 선택",isShowCloseButton:!0,isShowCancelButton:!0,isShowConfirmButton:!0,confirmButtonText:"확인",cancelButtonText:"취소",disabledCancelButton:!1,disabledConfirmButton:!1,autoClose:!1,initialDate:j(),showTimePicker:l.showTimePicker,defaultHour:l.defaultHour,defaultMinute:l.defaultMinute,minuteStep:l.minuteStep,size:{type:String,validator:e=>["lg","sm","normal"].includes(e),default:"normal"}})),j=()=>{const e=o.value==="from"?r.value:s.value;return e?g(e):null},$=e=>{r.value=e,y("update:fromDate",e),s.value&&b(e,s.value)},Y=e=>{s.value=e,y("update:toDate",e),r.value&&b(r.value,e)},q=e=>{const n=e.target.value;$(n)},O=e=>{const n=e.target.value;Y(n)},I=()=>{l.disabled||l.readonly||(o.value="from",w())},B=()=>{l.disabled||l.readonly||(o.value="to",w())},w=()=>{m.value=!m.value},L=()=>{m.value=!1},A=()=>{m.value=!1},G=async e=>{if(!e){console.log("❌ 날짜가 선택되지 않았습니다");return}const t=E(e);o.value==="from"?$(t):Y(t),l.showTimePicker&&y("time-change",{field:o.value,hour:e.getHours(),minute:e.getMinutes(),dateTime:e}),m.value=!1,await _(),console.log(`📅 ${o.value==="from"?"시작일":"종료일"} 선택: ${t}`),console.log("📅 Date 객체:",e),console.log("📅 내부 상태 - From:",r.value,"To:",s.value);const n=document.getElementById(o.value==="from"?p:`${p}-to`);n&&console.log(`📅 Input 요소 값: ${n.value}`)};return S([r,s],([e,t])=>{e&&t&&b(e,t)}),(e,t)=>(d(),u("div",te,[c("div",ae,[a.label?(d(),u("label",{key:0,for:T(p),class:h(["c-label",a.labelClass]),style:U({fontSize:e.labelSize})},[P.value?(d(!0),u(x,{key:0},W(V.value,(n,i)=>(d(),u("span",{key:i},[n==="*"?(d(),u("span",ne,"*")):(d(),u("span",oe,M(n),1))]))),128)):(d(),u(x,{key:1},[X(M(a.label),1)],64))],14,le)):C("",!0),c("div",{class:h(["c-inp-el",{lg:l.size==="lg",sm:l.size==="sm"}])},[c("input",{id:T(p),name:a.name,placeholder:H.value,value:r.value,readonly:a.readonly,disabled:a.disabled,class:h(["c-inp",e.$attrs.class,{"is-invalid":a.isInvalid||k.value,active:o.value==="from"}]),onInput:q,onClick:I},null,42,re),c("button",{class:"customCalendar",onClick:I}),t[0]||(t[0]=c("span",{class:"wave-txt"},"~",-1)),c("input",{id:`${T(p)}-to`,name:`${a.name}-to`,placeholder:N.value,value:s.value,readonly:a.readonly,disabled:a.disabled,class:h(["c-inp",e.$attrs.class,{"is-invalid":a.isInvalid||k.value,active:o.value==="to"}]),onInput:O,onClick:B},null,42,se),c("button",{class:"customCalendar",onClick:B})],2),a.isInvalid?(d(),u("p",ie,[c("span",ue,M(a.validText),1)])):C("",!0),k.value?(d(),u("p",ce,t[1]||(t[1]=[c("span",{class:"text"},"시작일이 종료일보다 늦을 수 없습니다",-1)]))):C("",!0)]),Q(J,Z({"is-visible":m.value},R.value,{onCancel:A,onConfirm:G,onClose:L}),null,16,["is-visible"])]))}}),pe=ee(de,[["__scopeId","data-v-a23a891a"]]);export{pe as I};
