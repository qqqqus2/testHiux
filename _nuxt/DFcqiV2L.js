import{F}from"./CbGEY-IY.js";import{g as y,r as x,z as I,s as S,a1 as h,e as _,o as V,_ as b,c as B,b as w,a as v,t as C,y as D,q as $,w as k}from"./D3dCSwSP.js";import{I as E}from"./8L-IPcO7.js";import{_ as R}from"./D_ru3p0q.js";import{E as P}from"./BQF7QMQl.js";const j=y({__name:"DiaryFieldset",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue","focus","blur"],setup(r,{emit:d}){const l=r,i=d,a=x(null),s=()=>{if(a.value){if(a.value.style.height="auto",!l.modelValue||l.modelValue.trim()===""){a.value.style.height="5.8rem";return}const t=a.value.scrollHeight,e=5*16,o=Math.max(t,e);a.value.style.height=o+"px"}},u=t=>{i("update:modelValue",t),h(()=>{s()})};return I(()=>l.modelValue,()=>{h(()=>{s()})}),S(()=>{h(()=>{const t=document.querySelector(".diary-fieldset textarea");t&&(a.value=t,s())})}),(t,e)=>(V(),_(F,{"model-value":t.modelValue,class:"diary-fieldset",placeholder:`편하게 마음속 이야기를 남겨보세요.
마음일기는 나만 볼 수 있어요.`,disabled:t.disabled,"max-length":9999,"onUpdate:modelValue":u,onFocus:e[0]||(e[0]=o=>t.$emit("focus")),onBlur:e[1]||(e[1]=o=>t.$emit("blur"))},null,8,["model-value","disabled"]))}}),G=b(j,[["__scopeId","data-v-2013052f"]]),H={class:"diary-image-uploader"},U={class:"bottom-actions"},q=y({__name:"DiaryImageUploader",props:{modelValue:{},registerButtonText:{default:"완료"},maxImages:{default:3}},emits:["update:modelValue","register","image-limit-exceeded"],setup(r,{emit:d}){const l=r,i=d,a=x([]);I(()=>l.modelValue,e=>{a.value=[]},{immediate:!0});const s=e=>{if(l.modelValue.length+e.length>l.maxImages){i("image-limit-exceeded");return}const n=e.map(m=>new Promise(c=>{const p=new FileReader;p.onload=g=>{var f;c((f=g.target)==null?void 0:f.result)},p.readAsDataURL(m)}));Promise.all(n).then(m=>{const c=[...l.modelValue],p=m.filter(g=>!c.some(f=>f===g));c.push(...p),i("update:modelValue",c)})},u=e=>{const o=[...l.modelValue];o.splice(e,1),i("update:modelValue",o)},t=e=>{e.includes("최대")?i("image-limit-exceeded"):console.error("이미지 업로드 오류:",e)};return(e,o)=>(V(),B("div",H,[w(E,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value=n),multiple:!0,"max-files":e.maxImages,"max-file-size":5*1024*1024,"show-icon":!0,"icon-type":"ico-image","icon-size":"2.4rem","show-preview":!1,"current-image-count":l.modelValue.length,"enable-limit-check":!0,onFileSelected:s,onFileRemoved:u,onError:t},null,8,["modelValue","max-files","current-image-count"]),v("div",U,[v("button",{type:"button",class:"register-btn",onClick:o[1]||(o[1]=n=>e.$emit("register"))},C(e.registerButtonText),1)])]))}}),J=b(q,[["__scopeId","data-v-7a736c45"]]),z={__name:"EmojiPickerModal",props:{isVisible:{type:Boolean,default:!1},title:{type:String,default:"오늘은 어떤 하루였나요?"},returnPath:{type:String,default:"/community/diary/create"},selectedDate:{type:String,default:""}},emits:["close","emoji-selected"],setup(r,{emit:d}){const l=D(),i=$(),a=r,s=d,u=n=>{if(s("emoji-selected",n),a.returnPath){const m={date:a.selectedDate||i.query.date,emoji:n.file,name:n.name};s("close"),l.push({path:a.returnPath,query:m})}},t=()=>{s("close")},e=()=>{s("close")},o=()=>{s("close")};return(n,m)=>(V(),_(R,{"is-visible":r.isVisible,title:r.title,"is-show-close-button":!0,"is-show-cancel-button":!1,"is-show-confirm-button":!1,"disabled-cancel-button":!1,"disabled-confirm-button":!1,onCancel:t,onConfirm:e,onClose:o},{content:k(()=>[w(P,{onEmojiSelected:u})]),_:1},8,["is-visible","title"]))}},K=b(z,[["__scopeId","data-v-0ca1591b"]]);export{G as D,K as E,J as a};
