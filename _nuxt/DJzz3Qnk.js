import{C as F}from"./Bx9jw0RD.js";import{B as S}from"./CfZVyjAv.js";import{B as b}from"./Bvlp-8xv.js";import{g as $,r as p,c as a,o as l,p as d,a as s,t as i,F as y,h as _,n as v,d as C,b as B,e as V,w as K,_ as L}from"./DXf4teaX.js";const A={class:"medical-history-accordion"},G={key:0,class:"accordion-header"},I={class:"item-header"},R={class:"item-header-top"},U={class:"item-logo"},z=["src","alt"],E={class:"item-info"},j={class:"item-tit"},q={class:"item-video-count"},J={key:0,class:"item-status"},O={key:1,class:"item-checkbox"},P={class:"item-header-bottom"},Q={key:0,class:"item-date"},W={key:1,class:"item-date"},X={key:0,class:"expire"},Y={key:1,class:"date"},Z={key:2,class:"item-date"},ee={key:3,class:"item-date"},te={class:"department-list"},se={class:"department-item-label"},oe={class:"department-item-tit-text"},le={class:"department-item-tit-text"},ae=["onClick"],ne={class:"toggle-text"},ie=$({__name:"MedicalHistoryAccordion",props:{medicalHistory:{},isLabelTitle:{type:Boolean},labelTitle:{default:"의료영상 공유내역"},isIssueDate:{type:Boolean,default:!1},isShareDate:{type:Boolean,default:!1},showStatus:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","change","status-click","history-click","share-click","cd-click"],setup(w,{emit:D}){const g=w,c=D,f=[{key:"share",label:"영상 공유",type:"primary-line"},{key:"cd",label:"CD 배송",type:"line"},{key:"history",label:"영상 공유 내역",type:"line"}],h=(o,t)=>{if(t&&t.length)return f.filter(r=>t.includes(r.key));const e=Math.max(0,Math.min(3,o??0));return f.slice(0,e)},T=(o,t)=>{const e=(t==null?void 0:t.length)??Math.max(0,Math.min(3,o??0));return{single:e===1,half:e===2,triple:e===3}},u=p(g.medicalHistory.map(()=>!1)),k=p(g.medicalHistory.map(()=>g.modelValue||!1)),x=o=>{u.value[o]=!u.value[o]},M=(o,t)=>{k.value[o]=t,c("update:modelValue",t),c("change",t)},N=o=>o.departments.reduce((t,e)=>t+e.examinations.length,0),H=(o,t)=>{o==="history"?c("history-click",t):o==="share"?c("share-click",t):o==="cd"&&c("cd-click",t)};return(o,t)=>(l(),a("div",A,[o.isLabelTitle?(l(),a("div",G,[s("span",null,i(o.labelTitle),1)])):d("",!0),(l(!0),a(y,null,_(o.medicalHistory,(e,r)=>(l(),a("div",{key:e.id,class:v(["accordion-item",{selected:o.showCheckbox&&k.value[r]}])},[s("div",I,[s("div",R,[s("div",U,[s("img",{src:e.logo,alt:e.hospitalName},null,8,z)]),s("div",E,[s("div",j,i(e.hospitalName),1),s("div",q,[t[0]||(t[0]=C(" 영상보유 ")),s("span",null,i(N(e)),1),t[1]||(t[1]=C("건 "))])]),o.showStatus?(l(),a("div",J,[B(b,{"btn-type":"text",class:"sm","aria-label":e.status||"상태",icon:e.arrowType?"arrow-type":"","icon-position":"right",disabled:!e.arrowType,onClick:n=>c("status-click",e)},null,8,["aria-label","icon","disabled","onClick"])])):d("",!0),o.showCheckbox?(l(),a("div",O,[B(F,{id:`checkbox-${e.hospitalName}`,"model-value":k.value[r],"custom-style":"small","aria-label":"","onUpdate:modelValue":n=>M(r,n)},null,8,["id","model-value","onUpdate:modelValue"])])):d("",!0)]),s("div",P,[e.accessDate?(l(),a("div",Q,[t[2]||(t[2]=s("strong",null,"발급 일자",-1)),s("strong",null,i(e.accessDate),1)])):d("",!0),e.shareFrom||e.shareTo?(l(),a("div",W,[t[3]||(t[3]=s("strong",null,"공유 기간",-1)),e.shareFrom&&e.shareTo?(l(),a("strong",Y,i(e.shareFrom)+" ~ "+i(e.shareTo),1)):(l(),a("strong",X,"공유기간 만료"))])):d("",!0),e.isRefund?(l(),a("div",Z,[t[4]||(t[4]=s("strong",null,"환불 상태",-1)),s("strong",null,i(e.isRefund),1)])):d("",!0),e.refundDate?(l(),a("div",ee,[t[5]||(t[5]=s("strong",null,"환불 일자",-1)),s("strong",null,i(e.refundDate),1)])):d("",!0),h(e.buttonCount,e.buttonKeys).length>0?(l(),V(S,{key:4,class:v(T(e.buttonCount,e.buttonKeys)),gap:"6"},{default:K(()=>[(l(!0),a(y,null,_(h(e.buttonCount,e.buttonKeys),n=>(l(),V(b,{key:n.key,"btn-type":n.type,class:"sm","aria-label":n.label,onClick:m=>H(n.key,e)},null,8,["btn-type","aria-label","onClick"]))),128))]),_:2},1032,["class"])):d("",!0)])]),s("div",{class:v(["item-content",{"is-expanded":u.value[r]}])},[s("div",te,[(l(!0),a(y,null,_(e.departments,n=>(l(),a("div",{key:n.id,class:"department-item"},[s("div",se,[t[6]||(t[6]=s("strong",null,"진료과",-1)),s("strong",null,i(n.department),1)]),(l(!0),a(y,null,_(n.examinations,m=>(l(),a("div",{key:m.id,class:"department-item-tit"},[s("div",oe,i(m.name),1),s("div",le,i(m.date),1)]))),128))]))),128))])],2),s("div",{class:"item-toggle",onClick:n=>x(r)},[s("div",ne,i(u.value[r]?"내역접기":"내역보기"),1),s("i",{class:v(["icon-arrow",{"is-rotated":u.value[r]}])},null,2)],8,ae)],2))),128))]))}}),me=L(ie,[["__scopeId","data-v-f7de5d39"]]);export{me as M};
