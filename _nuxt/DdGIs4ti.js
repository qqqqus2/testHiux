import{_ as Y}from"./B73pkvVt.js";import{g as I,r as P,k as w,z as Z,s as aa,c as C,o as b,a as o,p as ea,a4 as U,d as S,t as k,_ as D,ad as G,F as q,h as A,n as $,b as N,w as K,e as O}from"./DZksMEen.js";import{F as ta}from"./CtFsw451.js";const sa={style:{position:"relative",display:"inline-block"}},oa=["width","height"],na=I({__name:"CalorieChart",props:{addCalories:{type:Number,default:0},totalValue:{type:Number,default:3e3},targetMin:{type:Number,default:2e3},targetMax:{type:Number,default:2300},goalGap:{type:Number,default:.5},size:{type:Number,default:240},strokeWidth:{type:Number,default:30},duration:{type:Number,default:500}},setup(F){const e=F,u=P(null),d=P(0),m=P(null),g=w(()=>e.addCalories/e.totalValue*100),y=w(()=>[e.targetMin/e.totalValue*100,e.targetMax/e.totalValue*100]),f=Math.PI*2*.6,i=Math.PI/180*(-90-f*180/Math.PI/2),r=(a,t,s,p,h,_)=>{const c=new Path2D;c.moveTo(t+Math.cos(h)*p,t+Math.sin(h)*p),c.arc(t,t,p,h,_),c.lineTo(t+Math.cos(_)*s,t+Math.sin(_)*s),c.arc(t,t,s,_,h,!0),c.closePath(),a.save(),a.shadowColor="rgba(255, 255, 255, 0.5)",a.shadowBlur=10,a.fillStyle="rgba(255,255,255,0.9)",a.fill(c),a.restore(),a.fillStyle="rgba(255,255,255,1)",a.lineWidth=4,a.strokeStyle="rgba(255,255,255,1)",a.stroke(c),a.fill(c)},n=(a,t)=>{t=Math.min(t,100);const s=e.size/2,p=s-e.strokeWidth/2,h=p-e.strokeWidth/2,_=p+e.strokeWidth/2;a.clearRect(0,0,e.size,e.size);const[c,M]=y.value,T=e.goalGap,E=c+T,W=M-T,j=i+f*(E/100),x=i+f*(W/100),B=i+f*(t/100),L=(H,J)=>{const Q=i+f*(H/100),X=i+f*(J/100),z=a.createRadialGradient(s,s,h,s,s,_);z.addColorStop(0,"rgba(255,255,255,0.6)"),z.addColorStop(1,"rgba(255,255,255,0.6)"),a.beginPath(),a.arc(s,s,p,Q,X),a.strokeStyle=z,a.lineWidth=e.strokeWidth,a.lineCap="round",a.stroke()};L(0,c),L(M,100);const R=e.targetMax/e.totalValue*100;let V="#4C7FF7";t>30&&t<=R?V="#4C7FF7":t>R&&(V="#C92F2F"),a.strokeStyle=V,a.lineWidth=e.strokeWidth,a.lineCap="round",t<=E?(a.beginPath(),a.arc(s,s,p,i,B),a.stroke()):t>=W?(a.beginPath(),a.arc(s,s,p,i,i+f*(c/100)),a.stroke(),a.beginPath(),a.arc(s,s,p,i+f*(M/100),B),a.stroke()):(a.beginPath(),a.arc(s,s,p,i,i+f*(c/100)),a.stroke()),r(a,s,h,_,j,x)},l=()=>{const a=e.size/2,t=a-e.strokeWidth/2,[s,p]=y.value,h=(s+p)/2,_=i+f*(h/100),c=a+Math.cos(_)*(t+12),M=a+Math.sin(_)*(t+12);m.value={x:c,y:M}},v=(a,t,s)=>{const p=performance.now(),h=_=>{const c=Math.min((_-p)/s,1),M=a+(t-a)*c;d.value=M;const T=u.value.getContext("2d");n(T,M),c<1&&requestAnimationFrame(h)};requestAnimationFrame(h)};return Z(()=>[e.addCalories,e.targetMin,e.targetMax],()=>{l(),v(0,g.value,e.duration)},{immediate:!0}),aa(()=>{l(),v(0,g.value,e.duration)}),(a,t)=>(b(),C("div",sa,[o("canvas",{ref_key:"canvasRef",ref:u,width:F.size,height:F.size},null,8,oa),m.value?(b(),C("div",{key:0,class:"calorie-tooltip",style:U({position:"absolute",left:m.value.x+50+"px",top:m.value.y-20+"px",transform:"translate(-50%, -50%)",background:"#444",color:"#fff",padding:"0.6rem 1rem",fontSize:"1.2rem",textAlign:"center",borderRadius:"0.8rem 0.8rem 0.8rem 0",boxShadow:"0 0.5rem 0.5rem 0 rgba(0, 0, 0, 0.03)",whiteSpace:"nowrap"})},[t[0]||(t[0]=S(" 목표 구간")),t[1]||(t[1]=o("br",null,null,-1)),S(" "+k(e.targetMin.toLocaleString())+" ~ "+k(e.targetMax.toLocaleString()),1)],4)):ea("",!0)]))}}),la=D(na,[["__scopeId","data-v-d924c29c"]]),ia={class:"food-intake-dashboard"},ra={class:"date-box"},da={class:"bar"},ca={class:"date-num"},ua={class:"chart-container"},pa={class:"chart-wrap"},fa=I({__name:"FoodIntakeDashboard",setup(F){const e=P(!1),u=()=>{e.value=!e.value},d=[{date:"10",today:!1,progress:.3},{date:"11",today:!1,progress:.45},{date:"12",today:!1,progress:.6},{date:"13",today:!1,progress:.75},{date:"14",today:!1,progress:.2},{date:"15",today:!1,progress:.5},{date:"16",today:!0,progress:.9}];return(m,g)=>(b(),C("div",ia,[o("div",{class:$(["intake-amount",{collapsed:!e.value}])},[o("button",{type:"button",class:"amount-tit",onClick:u},"섭취량 일일그래프"),o("div",ra,[(b(),C(q,null,A(d,y=>o("div",{key:y.date,class:$(["date-item",{today:y.today}])},[o("div",da,[o("i",{class:"current-bar",style:U({height:e.value?y.progress*100+"%":"0%"})},null,4)]),o("span",ca,k(y.date),1)],2)),64))])],2),g[1]||(g[1]=G('<div class="calories-status" data-v-ef6a619e><div class="status-item bmr" data-v-ef6a619e><strong class="info-value" data-v-ef6a619e>1,487</strong><span class="info-txt" data-v-ef6a619e>기초대사량</span></div><div class="status-item burned-calories" data-v-ef6a619e><strong class="info-value" data-v-ef6a619e>780</strong><span class="info-txt" data-v-ef6a619e>소모칼로리</span></div><div class="status-item calorie-goal" data-v-ef6a619e><strong class="info-value" data-v-ef6a619e>2,267</strong><span class="info-txt" data-v-ef6a619e>목표칼로리</span></div></div>',1)),o("div",ua,[o("div",pa,[N(la,{"add-calories":500})]),g[0]||(g[0]=G('<div class="chart-info" data-v-ef6a619e><div class="chart-txt" data-v-ef6a619e><span class="time" data-v-ef6a619e>16:30 기준</span><strong class="value" data-v-ef6a619e>2000</strong><span class="value-txt" data-v-ef6a619e>현재 섭취칼로리</span></div></div>',1))])]))}}),ma=D(fa,[["__scopeId","data-v-ef6a619e"]]),ga={breakfast:"ico-sun","morning-snack":"ico-apple",lunch:"ico-sunset","afternoon-snack":"ico-coffee",dinner:"ico-crescent","night-snack":"ico-bat"},va={breakfast:"아침식사","morning-snack":"오전 간식",lunch:"점심식사","afternoon-snack":"오후 간식",dinner:"저녁식사","night-snack":"야간 간식"},ha={class:"meal-plan-item"},_a={class:"meal-calories"},ya={class:"eat-time"},ba={class:"calories-num"},ka=["aria-label"],Ca={class:"menu-name"},Fa={class:"detail-info"},Ma={class:"amount"},Pa={class:"calories"},wa=["aria-label","onClick"],Ia=I({__name:"MealPlanItem",props:{mealType:{},mealTitle:{},foods:{},iconClass:{}},emits:["addFood","deleteFood"],setup(F,{emit:e}){const u=F,d=e,m=w(()=>u.iconClass||ga[u.mealType]),g=w(()=>u.mealTitle||va[u.mealType]),y=w(()=>!u.foods||u.foods.length===0?0:u.foods.reduce((i,r)=>i+r.calories,0)),f=(i,r)=>{d("deleteFood",i,r,u.mealType)};return(i,r)=>(b(),C("div",ha,[o("div",_a,[o("strong",ya,[o("i",{class:$(["icon",m.value])},null,2),S(" "+k(g.value),1)]),o("div",{class:$(["total-calories",{"none-eat":y.value===0}])},[o("strong",ba,k(y.value),1),r[1]||(r[1]=S(" Kcal ")),o("button",{type:"button",class:"btn-add","aria-label":`${g.value} 메뉴 추가`,onClick:r[0]||(r[0]=(...n)=>i.handleAddFood&&i.handleAddFood(...n))},null,8,ka)],2)]),(b(!0),C(q,null,A(i.foods,(n,l)=>(b(),C("div",{key:n.id||l,class:"detail-menu"},[o("span",Ca,k(n.name),1),o("div",Fa,[o("span",Ma,k(n.quantity)+" / "+k(n.weight)+"g",1),o("strong",Pa,k(n.calories)+"kcal",1),o("button",{type:"button",class:"btn-del","aria-label":`${n.name} 삭제`,onClick:v=>f(n,l)},null,8,wa)])]))),128))]))}}),Ta=D(Ia,[["__scopeId","data-v-1e4d73b6"]]),Sa={class:"food-intake-info"},$a=I({__name:"FoodIntakeInfo",emits:["addFood","deleteFood","updateMealPlans"],setup(F,{expose:e,emit:u}){const d=P([{type:"breakfast",title:"아침식사",iconClass:"ico-sun",foods:[{id:1,name:"우유",quantity:1,weight:200,calories:130},{id:2,name:"우유",quantity:1,weight:200,calories:130},{id:3,name:"바나나",quantity:1,weight:200,calories:130}]},{type:"morning-snack",title:"오전 간식",iconClass:"ico-apple",foods:[{id:4,name:"우유",quantity:1,weight:200,calories:130}]},{type:"lunch",title:"점심식사",iconClass:"ico-sunset",foods:[{id:5,name:"우유",quantity:1,weight:200,calories:130}]},{type:"afternoon-snack",title:"오후 간식",iconClass:"ico-coffee",foods:[{id:6,name:"우유",quantity:1,weight:200,calories:130}]},{type:"dinner",title:"저녁식사",iconClass:"ico-crescent",foods:[{id:7,name:"우유",quantity:1,weight:200,calories:130}]},{type:"night-snack",title:"야간 간식",iconClass:"ico-bat",foods:[]}]),m=u,g=(r,n,l)=>{const v=d.value.findIndex(a=>a.type===l);v!==-1&&(d.value[v].foods.splice(n,1),m("deleteFood",r,l),m("updateMealPlans",d.value))};return e({addFoodToMeal:(r,n)=>{const l=d.value.findIndex(v=>v.type===r);l!==-1&&(d.value[l].foods.push(n),m("updateMealPlans",d.value))},updateMealFoods:(r,n)=>{const l=d.value.findIndex(v=>v.type===r);l!==-1&&(d.value[l].foods=n,m("updateMealPlans",d.value))},getTotalDailyCalories:()=>d.value.reduce((r,n)=>{const l=n.foods.reduce((v,a)=>v+a.calories,0);return r+l},0),mealPlans:d}),(r,n)=>(b(),C("div",Sa,[n[0]||(n[0]=o("h5",{class:"info-tit mb-13"},"오늘의 식단",-1)),N(ta,{class:"gap-12"},{default:K(()=>[(b(!0),C(q,null,A(d.value,l=>(b(),O(Ta,{key:l.type,"meal-type":l.type,"meal-title":l.title,foods:l.foods,"icon-class":l.iconClass,onAddFood:r.handleAddFood,onDeleteFood:g},null,8,["meal-type","meal-title","foods","icon-class","onAddFood"]))),128))]),_:1})]))}}),Na=D($a,[["__scopeId","data-v-d131a755"]]),qa=I({__name:"foodIntake",setup(F){return(e,u)=>(b(),O(Y,{"show-back-button":!0,"page-title":"섭취음식"},{default:K(()=>[N(ma),N(Na)]),_:1}))}});export{qa as default};
