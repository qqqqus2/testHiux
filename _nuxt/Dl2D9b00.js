import{_ as z}from"./CJS4WFyZ.js";import{g as I,a8 as F,r as p,k as h,z as d,s as O,a1 as u,c as f,a as R,F as C,h as j,a4 as A,o as v,e as $,w as N,d as E,t as L,n as S,_ as M}from"./CEJX9E6Q.js";const U={class:"round-tabs"},V=["onClick"],D=I({__name:"RoundTabs",props:{tabs:{},activeKey:{}},emits:["tab-change"],setup(K,{emit:P}){const i=K,_=P,c=F(),o=p(),r=p(),q=(t,a)=>{if(i.activeKey!==void 0&&t.key){_("tab-change",t.key,t);return}!t.to&&t.key&&_("tab-change",t.key,t)},W=(t,a)=>i.activeKey!==void 0?t.key===i.activeKey:t.to?c.path+(c.query&&Object.keys(c.query).length>0?"?"+new URLSearchParams(c.query).toString():"")===t.to:a===0,k=h(()=>{if(i.activeKey!==void 0){const n=i.tabs.findIndex(e=>e.key===i.activeKey);return n>=0?n:0}const t=c.path+(c.query&&Object.keys(c.query).length>0?"?"+new URLSearchParams(c.query).toString():""),a=i.tabs.findIndex(n=>n.to===t);return a>=0?a:0}),T=h(()=>{var s;const a=((s=o.value)==null?void 0:s.clientWidth)||360,n=i.tabs.length,e=a/n;return e<100?100:e}),y=h(()=>{var s;const a=((s=o.value)==null?void 0:s.clientWidth)||360,n=i.tabs.length;return a/n<100}),w=h(()=>{const t=i.tabs.length,a=k.value;if(t===0)return{width:"0%",left:"0%",opacity:"0"};const n=100/t,e=n,s=a*n;return{width:`${e}%`,left:`${s}%`,opacity:"1"}}),x=()=>{if(!o.value||!y.value)return;const t=o.value,a=k.value,n=T.value,e=a*n,s=e+n,m=t.scrollLeft,B=m+t.clientWidth;e<m?t.scrollTo({left:e-20,behavior:"smooth"}):s>B&&t.scrollTo({left:s-t.clientWidth+20,behavior:"smooth"})},b=p(360);d(()=>[c.path,c.query],async()=>{i.activeKey===void 0&&(await u(),l(),x())},{immediate:!0}),d(()=>i.activeKey,async()=>{i.activeKey!==void 0&&(await u(),l(),x())},{immediate:!0}),d(()=>o.value,t=>{t&&new ResizeObserver(n=>{for(const e of n)b.value=e.contentRect.width,setTimeout(()=>{g(!0)},50)}).observe(t)}),d(()=>[b.value,y.value],async()=>{await u(),l()}),d(()=>T.value,async()=>{await u(),l()}),O(async()=>{await u(),o.value&&(b.value=o.value.clientWidth,g(),setTimeout(()=>{l()},100))});const g=(t=!1)=>{if(!o.value)return;const a=o.value;a.querySelectorAll(".tab-link").forEach(e=>{if(y.value)e.style.minWidth="10rem",e.style.width="10rem",e.style.flex="none";else{const s=100/i.tabs.length;e.style.minWidth="auto",e.style.width=`${s}%`,e.style.flex="1"}}),y.value?a.style.justifyContent="flex-start":a.style.justifyContent="center",l(t)},l=async(t=!1)=>{if(await u(),r.value){const a=w.value;t&&(r.value.style.transition="none"),r.value.style.left=a.left,r.value.style.width=a.width,r.value.style.opacity=a.opacity||"1",t&&setTimeout(()=>{r.value&&(r.value.style.transition="")},50)}};return(t,a)=>{const n=z;return v(),f("div",U,[R("div",{ref_key:"tabsContainerRef",ref:o,class:"tabs-container"},[(v(!0),f(C,null,j(i.tabs,(e,s)=>(v(),f(C,{key:e.key||e.to||s},[e.to?(v(),$(n,{key:0,to:e.to,class:S([{active:W(e,s)},"tab-link"])},{default:N(()=>[E(L(e.title),1)]),_:2},1032,["to","class"])):(v(),f("button",{key:1,class:S([{active:W(e,s)},"tab-link"]),onClick:m=>q(e)},L(e.title),11,V))],64))),128)),R("div",{ref_key:"activeBarRef",ref:r,class:"tab-active-bar",style:A(w.value)},null,4)],512)])}}}),J=M(D,[["__scopeId","data-v-6f4fb173"]]);export{J as R};
