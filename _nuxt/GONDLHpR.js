import{g as x,r as a,k as m,s as V,c as i,p as X,u as c,F as Y,a as l,d as y,o as d,b as F}from"./D3dCSwSP.js";const I={style:{position:"relative",display:"inline-block"}},L=["src"],M=x({__name:"Signature",props:{isLoading:{type:Boolean,default:!1},src:{default:""}},setup(g){const v=g,n=a(),o=a(),s=a(0),h=a(0),r=a(!1),_=m(()=>document.getElementById("placeholder")),b=()=>{_.value.style.display="none"},f=t=>{const e=t.touches[0]||t.changedTouches[0],u=n.value.getBoundingClientRect(),N=n.value.width/u.width,P=n.value.height/u.height;return{x:(e.clientX-u.left)*N,y:(e.clientY-u.top)*P}},T=t=>{t.preventDefault();const e=f(t);s.value=e.x,h.value=e.y,r.value=!0},k=t=>{if(!r.value)return;b();const e=f(t);C(e.x,e.y),s.value=e.x,h.value=e.y},w=async t=>{r.value=!1;const e=await S();console.log("이미지",e)},B=t=>{r.value=!1},C=(t,e)=>{o.value.beginPath(),o.value.moveTo(s.value,h.value),o.value.lineTo(t,e),o.value.stroke()},S=async()=>new Promise(t=>{n.value.toBlob(e=>{e&&t(e)},"image/png")}),E=()=>{n.value&&(o.value=n.value.getContext("2d"),o.value.fillStyle="white",o.value.lineWidth=2,o.value.fillRect(0,0,500,500))};V(()=>{E()});const p=m(()=>v.src);return(t,e)=>(d(),i("div",I,[c(p)?(d(),i("img",{key:0,src:c(p),alt:"signature",style:{height:"200px",width:"100%",border:"1px solid gainsboro","touch-action":"none"}},null,8,L)):c(p)?X("",!0):(d(),i(Y,{key:1},[l("canvas",{ref_key:"canvas",ref:n,style:{height:"200px",border:"1px solid gainsboro","touch-action":"none"},onTouchstart:T,onTouchmove:k,onTouchend:w,onTouchcancel:B},null,544),e[0]||(e[0]=l("div",{id:"placeholder",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"gray","pointer-events":"none","text-align":"center"}},[l("span",null,[y("손가락으로 직접"),l("br"),y("여기에 서명해 주세요")])],-1))],64))]))}}),D=x({__name:"signature",setup(g){const v=a(""),n=a(!1);return(o,s)=>(d(),i("div",null,[s[0]||(s[0]=l("h3",null,"서명 컴포넌트 테스트 페이지",-1)),F(M,{"is-loading":c(n),src:c(v)},null,8,["is-loading","src"])]))}});export{D as default};
