import{_ as j,C as J,a8 as z,r as w,k as C,c,o as n,a as t,b as u,p as P,F as M,h as L,t as D,w as T,m as F,g as S,y as H,n as E,i as N,u as b,e as B,j as U,ad as G,A as K,s as X,d as R,q as Y}from"./DZksMEen.js";import{_ as Z}from"./B73pkvVt.js";import{L as ee}from"./lyrS68NC.js";import{_ as te}from"./B9HIiqwO.js";import{E as se}from"./DQn12dIT.js";import{T as O}from"./rV_bXVji.js";import{C as W}from"./CRAytAyU.js";import{B as ae}from"./DKYsh4JT.js";import{F as V}from"./BoT4MENw.js";import{F as oe}from"./CtFsw451.js";import{S as ie}from"./DS3HcE6c.js";import{_ as A}from"./XOeveOBs.js";import{_ as ne}from"./DoybFlvs.js";import"./DNsJaZtH.js";/* empty css        *//* empty css        *//* empty css        */const le={class:"emoji-selector"},re={class:"emoji-list"},ce=["src","alt","onClick"],de={class:"emoji-label"},ue=["src"],me={__name:"EmojiSelector",props:{emojis:{type:Array,required:!1,default:()=>[{src:"/_nuxt/assets/images/emoji/thrilled.svg",label:"기쁨"},{src:"/_nuxt/assets/images/emoji/peaceful.svg",label:"평온"},{src:"/_nuxt/assets/images/emoji/indifferent.svg",label:"덤덤"},{src:"/_nuxt/assets/images/emoji/upset.svg",label:"속상"},{src:"/_nuxt/assets/images/emoji/angry.svg",label:"화남"}]},max:{type:Number,default:6},moreImg:{type:String,default:"/_nuxt/assets/images/emoji/more.svg"}},setup(f){const i=J(),s=z(),e=f,l=w(!1),m=C(()=>e.emojis.slice(0,e.max-1)),v=C(()=>!0),h=w({title:"오늘은 어떤 하루였나요?",isShowCloseButton:!0,isShowCancelButton:!1,isShowConfirmButton:!1,disabledCancelButton:!1,disabledConfirmButton:!1}),k=p=>{const r=s.query.returnPath||"/community/diary/create",y=p.src.split("/").pop().replace(".svg","")||"",o={date:s.query.date,emoji:y,name:p.label};i.push({path:r,query:o})},q=p=>{const r=s.query.returnPath||"/community/diary/create",y={date:s.query.date,emoji:p.file,name:p.name};l.value=!1,i.push({path:r,query:y})},$=()=>{l.value=!1},g=()=>{l.value=!1},a=()=>{const p={date:s.query.date,returnPath:s.query.returnPath||"/community/diary/create"};i.push({path:"/community/diary/emojiPicker",query:p})};return(p,r)=>(n(),c(M,null,[t("div",le,[t("div",re,[(n(!0),c(M,null,L(m.value,(y,o)=>(n(),c("div",{key:y.label,class:"emoji-item"},[t("img",{src:y.src,alt:y.label,class:"emoji-img",onClick:_=>k(y)},null,8,ce),t("div",de,D(y.label),1)]))),128)),v.value?(n(),c("div",{key:0,class:"emoji-item more",onClick:a},[t("img",{src:f.moreImg,alt:"이모지 더보기",class:"emoji-img"},null,8,ue),r[1]||(r[1]=t("div",{class:"emoji-label"},"...",-1))])):P("",!0)])]),u(te,F({"is-visible":l.value},h.value,{onCancel:$,onConfirm:g,onClose:r[0]||(r[0]=y=>l.value=!1)}),{content:T(()=>[u(se,{onEmojiSelected:q})]),_:1},16,["is-visible"])],64))}},pe=j(me,[["__scopeId","data-v-eda1aaef"]]),_e={class:"emoji-section ml-n20 mr-n20"},ye=S({__name:"EmojiSection",setup(f){return(i,s)=>(n(),c("section",_e,[u(O,{"is-title":!0,center:!0,"html-title":"오늘 기분 어때요? <span>이모티콘을 선택해보세요</span>"}),u(pe)]))}}),fe=j(ye,[["__scopeId","data-v-c997e1d1"]]),ve=["src"],he=["innerHTML"],ge=S({__name:"QuestionCard",props:{emoji:{default:""},questions:{default:()=>[]},customClass:{default:""}},setup(f){const i=H(),s=f,e=C(()=>{if(s.questions&&s.questions.length>0){const m=Math.floor(Math.random()*s.questions.length);return s.questions[m]}return""}),l=()=>{const m={type:"daily-quote",emoji:s.emoji,question:e.value};i.push({path:"/community/diary/create",query:m})};return(m,v)=>(n(),c("div",{class:E(["question-card",m.customClass]),onClick:l},[t("img",{src:`/_nuxt/assets/images/emoji/${m.emoji}`,alt:"아이콘",class:"emoji"},null,8,ve),t("p",{innerHTML:e.value},null,8,he)],2))}}),be=j(ge,[["__scopeId","data-v-d54f9369"]]),Ce={class:"daily-quote-section"},ke=S({__name:"DailyQuoteSection",setup(f){const i=[{id:1,customClass:"type1",emoji:"thrilled.svg",questions:["오늘 나를 웃게 만든 순간은 언제였나요?","요즘 내가 잘하고 있다고 느낀 부분은 언제였나요?","지금 기분을 색으로 표현한다면 어떤 색일까요?"]},{id:2,customClass:"type2",emoji:"sad.svg",questions:["오늘 하루 중 가장 힘들었던 순간은 언제였나요?","지금 마음이 무거운 이유는 무엇인가요?","나를 지치게 만든 일이 있으셨나요?"]},{id:3,customClass:"type3",emoji:"peaceful.svg",questions:["오늘 지나간 하루 중 기억에 남는 장면이 있으셨나요?","오늘이 평범하게 느껴졌던 이유는 무엇인가요?","마음이 조용하다고 느낀 순간은 언제였나요?"]}];return(s,e)=>(n(),c("section",Ce,[e[0]||(e[0]=t("div",{class:"title-box"},[t("div",null,[t("strong",{class:"blue"},"오늘 한마디"),t("p",null,"할 말이 떠오르지 않는다면 질문에 답해보세요")]),t("i",{class:"icon"})],-1)),u(W,{slides:i,"slide-type":"custom","slides-per-view":"auto","space-between":12,"slides-offset-before":20,"slides-offset-after":20,navigation:!1,pagination:!1,loop:!1,scrollbar:!1,"show-slide-info":!1,"show-slide-length":!1,"show-play-pause-button":!1,class:"question-swiper"},{default:T(({slide:l})=>[u(be,{"custom-class":l.customClass,emoji:l.emoji,questions:l.questions},null,8,["custom-class","emoji","questions"])]),_:1})]))}}),De=j(ke,[["__scopeId","data-v-e4e0b4b2"]]),je=["innerHTML"],$e=["innerHTML"],xe=S({__name:"AiBox",props:{type:{default:"no-diary"},title:{},text:{},icon:{}},setup(f){const i=f,s={"no-diary":{buttonText:"마음일기 써보기",action:()=>l()},"in-progress":{buttonText:"감정 분석을 준비중이예요",disabled:"disabled",icon:"ico-ai",action:()=>m()},completed:{buttonText:"감정 리포트 받기",icon:"ico-ai",action:()=>v()}},e=C(()=>s[i.type]),l=()=>{console.log("일기 쓰기 페이지로 이동"),N("/diary/write")},m=()=>{console.log("진행 중인 일기 계속 쓰기"),N("/diary/continue")},v=()=>{console.log("완성된 일기 보기"),N("/diary/view")};return(h,k)=>(n(),c("div",{class:E(["ai-box",h.type])},[t("strong",{class:"title",innerHTML:h.title},null,8,je),t("p",{innerHTML:h.text,class:"text"},null,8,$e),u(ae,{"btn-type":"line",text:b(e).buttonText,"aria-label":b(e).buttonText,icon:b(e).icon,disabled:b(e).disabled,class:E({disabled:b(e).disabled}),onClick:b(e).action},null,8,["text","aria-label","icon","disabled","class","onClick"])],2))}}),we=j(xe,[["__scopeId","data-v-fb389157"]]),Se={class:"record-count-card"},Te={class:"info"},qe={class:"title"},Ie={class:"record-count"},Pe={key:1,class:"record-number"},Ee=S({__name:"RecordCountCard",props:{title:{default:""},recordCount:{default:0},isEmoji:{type:Boolean,default:!1},isNum:{type:Boolean,default:!1},emojiClass:{default:""}},setup(f){const i=f,s=C(()=>i.recordCount===0?i.title==="많이 기록한 감정"?"기록된 감정이 없어요":i.title==="남긴 일기 수"?"남긴 일기가 없어요":"기록이 없어요":`${i.recordCount}회 언급`);return(e,l)=>(n(),c("div",Se,[t("div",Te,[t("strong",qe,D(e.title),1),t("p",Ie,D(b(s)),1)]),e.isEmoji?(n(),c("i",{key:0,class:E(["emoji",e.emojiClass])},null,2)):e.isNum&&e.recordCount>0?(n(),c("strong",Pe,D(e.recordCount)+"회",1)):P("",!0)]))}}),Me=j(Ee,[["__scopeId","data-v-cedb2a90"]]),Le={class:"diary-info"},Ne={class:"diary-title"},Be={class:"diary-date"},Oe={class:"diary-text"},Qe=S({__name:"RecordDiaryCard",props:{diaryLink:{default:"#"},diaryTitle:{default:""},diaryDate:{default:""},diaryText:{default:""}},setup(f){return(i,s)=>{const e=A;return n(),B(e,{to:i.diaryLink,class:"record-count-card"},{default:T(()=>[t("div",Le,[t("strong",Ne,D(i.diaryTitle),1),t("span",Be,D(i.diaryDate),1),t("p",Oe,D(i.diaryText),1)])]),_:1},8,["to"])}}}),Re=j(Qe,[["__scopeId","data-v-1e8160c6"]]),Ve={class:"current-mood-section"},Fe=S({__name:"CurrentMoodSection",setup(f){const i=[{id:1,title:"많이 기록한 감정",recordCount:0,isEmoji:!0,emojiClass:"touched"},{id:2,title:"남긴 일기 수",recordCount:1,isNum:!0}],s=w("집에 가는길에 붕어빵을 팔길래 사먹었다. 살찔까봐 걱정은 되지만..#체중62kg인데 언제 살빼나 g인데 언제 살빼나"),e=[{value:"1weeks",label:"1주일"},{value:"1month",label:"1개월"},{value:"3month",label:"3개월"},{value:"6month",label:"6개월"},{value:"1year",label:"1년"},{value:"all",label:"전체"}],l=w("1weeks"),m=w("in-progress"),v=w({currentCount:8,targetCount:20,daysLeft:52}),h=C(()=>Math.max(0,v.value.targetCount-v.value.currentCount)),k=C(()=>({"no-diary":{title:"감정분석을 위한 <br/>마음일기를 시작해보세요.",text:`60일 동안 ${v.value.targetCount}개 이상 기록이 쌓이면, <br/>당신만의 감정 리포트가 열립니다. <br/>첫 마음일기를 남겨보세요!`},"in-progress":{title:"당신의 감정분석을 <br/>준비 중이에요.",text:`지금까지의 마음일기 ${v.value.currentCount}개, <br/>분석까지 ${h.value}개가 더 필요해요. <br/>기록이 많을수록 AI감정 리포트가 정교해져요!`},completed:{title:"마음 기록 VIP! <br/>감성분석이 열렸어요.",text:`60일간의 기록 달성! <br/>총 ${v.value.currentCount}개의 마음일기를 바탕으로, <br/>AI 감정분석을 시작할게요!`}})[m.value]);return(q,$)=>(n(),c("section",Ve,[u(O,{title:"요즘 나는?",class:"mb-0"}),u(we,{type:b(m),title:b(k).title,text:b(k).text},null,8,["type","title","text"]),u(oe,null,{default:T(()=>[u(V,{class:"align-center mt-12 mb-8"},{default:T(()=>[u(ie,{modelValue:b(l),"onUpdate:modelValue":$[0]||($[0]=g=>U(l)?l.value=g:null),"custom-opts":e,"select-placeholder":"","modal-title":"조회 기간 선택","is-show-cancel-btn":!1},null,8,["modelValue"]),$[1]||($[1]=t("p",null,"동안의 기록이에요",-1))]),_:1,__:[1]}),u(V,{class:"gap-12"},{default:T(()=>[(n(),c(M,null,L(i,g=>u(Me,{key:g.id,title:g.title,"record-count":g.recordCount,"is-emoji":g.isEmoji,"emoji-Class":g.emojiClass,"is-num":g.isNum},null,8,["title","record-count","is-emoji","emoji-Class","is-num"])),64))]),_:1}),u(Re,{"diary-title":"지난달엔 어땠을까?","diary-date":"2024.03.18","diary-text":b(s),class:"mt-12"},null,8,["diary-text"])]),_:1})]))}}),He=j(Fe,[["__scopeId","data-v-c3fda3aa"]]),We={class:"weekly-picker"},Ae={class:"week-dates"},Je=["onClick"],ze={class:"date-cell"},Ue=["onClick"],Ge=S({__name:"WeeklyPicker",props:{selectedDate:{},diaryData:{},disabledDates:{default:()=>[]}},emits:["date-click","emoji-click","no-data-click"],setup(f,{emit:i}){const s=f,e=i,l=C(()=>{const a=new Date,p=a.getDay(),r=new Date(a);r.setDate(a.getDate()-p);const y=[];for(let o=0;o<7;o++){const _=new Date(r);_.setDate(r.getDate()+o),y.push({date:_.toISOString().split("T")[0],day:_.getDate(),dayOfWeek:_.getDay()})}return y}),m=a=>s.selectedDate.toISOString().split("T")[0]===a,v=a=>{const p=new Date().toISOString().split("T")[0];return a===p},h=a=>{const p=new Date().toISOString().split("T")[0];return a>p||s.disabledDates.includes(a)},k=a=>{const p=new Date().toISOString().split("T")[0];return a<=p&&!s.diaryData[a]},q=a=>h(a)?"":s.diaryData[a]?`emoji-${s.diaryData[a].status}`:"emoji-diary",$=a=>{h(a)||(k(a)?e("no-data-click",a):e("date-click",a))},g=(a,p)=>{h(a)||(k(a)?e("no-data-click",a):e("emoji-click",a,p))};return(a,p)=>(n(),c("div",We,[p[0]||(p[0]=G('<div class="week-header" data-v-1355181a><div class="day-name sunday" data-v-1355181a>일</div><div class="day-name" data-v-1355181a>월</div><div class="day-name" data-v-1355181a>화</div><div class="day-name" data-v-1355181a>수</div><div class="day-name" data-v-1355181a>목</div><div class="day-name" data-v-1355181a>금</div><div class="day-name saturday" data-v-1355181a>토</div></div>',1)),t("div",Ae,[(n(!0),c(M,null,L(l.value,r=>(n(),c("div",{key:r.date,class:E({"date-item":!0,selected:m(r.date),today:v(r.date),disabled:h(r.date),sunday:r.dayOfWeek===0,saturday:r.dayOfWeek===6,"heart-diary":!0,"no-data":k(r.date)}),onClick:y=>$(r.date)},[t("span",ze,D(r.day),1),t("span",{class:E(["emoji",q(r.date)]),onClick:K(y=>g(r.date,y),["stop"])},null,10,Ue)],10,Je))),128))])]))}}),Ke=j(Ge,[["__scopeId","data-v-1355181a"]]),Xe={class:"mood-diary-section"},Ye={class:"selected-date-header mt-32"},Ze={key:0,class:"daily-diary-list"},et=["onClick"],tt={class:"emoji-box"},st=["src","alt"],at={key:0,class:"content-box"},ot={key:0,class:"daily-quote-content"},it=["innerHTML"],nt={key:0,class:"diary-text"},lt={key:1,class:"diary-text"},rt={key:1,class:"diary-images"},ct={key:1,class:"no-diary"},dt=S({__name:"MoodDiarySection",setup(f){const i={moodSection:{slidesPerView:1,spaceBetween:8,pagination:!1,navigation:!1,loop:!1,showSlideLength:!0,showPlayPauseButton:!1}},s=H(),e=w(new Date),l=w({}),m=C(()=>{const o=new Date,_=[];for(let d=1;d<=30;d++){const x=new Date(o);x.setDate(o.getDate()+d),_.push(x.toISOString().split("T")[0])}return _}),v=C(()=>{const o=e.value.getMonth()+1,_=e.value.getDate(),d=e.value.getDay();return`${o}월 ${_}일 ${["일","월","화","수","목","금","토"][d]}요일`}),h=C(()=>{const o=e.value.toISOString().split("T")[0];return JSON.parse(localStorage.getItem("diaryList")||"[]").filter(d=>d.date===o)}),k=o=>o?o.replace(/<br\s*\/?>/gi," "):"",q=o=>o.isDailyQuote&&o.dailyQuoteQuestion||o.content,$=o=>{e.value=new Date(o)},g=(o,_)=>{e.value=new Date(o)},a=o=>{e.value=new Date(o),r()},p=o=>{s.push(`/community/diary/${o}`)},r=()=>{s.push({path:"/community/diary/emojiPicker",query:{date:e.value.toISOString().split("T")[0],returnTo:"mood-diary"}})},y=()=>{const o=JSON.parse(localStorage.getItem("diaryList")||"[]"),_={};o.forEach(x=>{const I=x.date;_[I]||(_[I]=[]),_[I].push(x)});const d={};Object.keys(_).forEach(x=>{var Q;const I=_[x];I.length>0&&(d[x]={status:((Q=I[0].emoji.src.split("/").pop())==null?void 0:Q.replace(".svg",""))||"happy"})}),l.value=d};return X(()=>{y()}),(o,_)=>(n(),c("section",Xe,[u(O,{title:"마음일기",titleClass:"","element-type":"a","aria-label":"달력전체보기",icon:"arrow-type-black","link-href":"/community/diary/list","is-show-link":!0}),u(Ke,{"selected-date":e.value,"diary-data":l.value,"disabled-dates":m.value,onDateClick:$,onEmojiClick:g,onNoDataClick:a},null,8,["selected-date","diary-data","disabled-dates"]),t("div",Ye,D(v.value),1),h.value.length>0?(n(),c("div",Ze,[(n(!0),c(M,null,L(h.value,d=>(n(),c("div",{key:d.id,class:"diary-item",onClick:x=>p(d.id)},[t("div",tt,[t("img",{src:d.emoji.src,alt:d.emoji.label},null,8,st)]),q(d)?(n(),c("div",at,[d.isDailyQuote?(n(),c("div",ot,[_[0]||(_[0]=t("div",{class:"daily-quote-label"},"오늘 한마디",-1)),t("div",{class:"daily-quote-question",innerHTML:k(d.dailyQuoteQuestion)},null,8,it),d.content?(n(),c("p",nt,D(d.content),1)):P("",!0)])):d.content?(n(),c("p",lt,D(d.content),1)):P("",!0)])):P("",!0),d.images&&d.images.length>0?(n(),c("div",rt,[u(W,F({slides:d.images,"slide-type":"image"},{ref_for:!0},i.moodSection,{class:"diary-image-swiper"}),null,16,["slides"])])):P("",!0)],8,et))),128))])):(n(),c("div",ct,_[1]||(_[1]=[t("div",{class:"no-diary-icon"},[t("img",{src:ne,alt:"일기 없음"})],-1),t("p",null,[R("작성된 일기가 없습니다. "),t("br"),R("오늘 하루 어떠셨나요?")],-1)])))]))}}),ut=j(dt,[["__scopeId","data-v-cf5addc8"]]),mt={};function pt(f,i){const s=A;return n(),B(s,{to:"/community/diary/emojiPicker",class:"floating-write-button","aria-label":"다이어리 쓰기 버튼"},{default:T(()=>i[0]||(i[0]=[t("i",{class:"icon ico-float-write"},null,-1)])),_:1,__:[0]})}const _t=j(mt,[["render",pt],["__scopeId","data-v-50872a3a"]]),Pt=S({__name:"index",setup(f){const i=Y(),s=w("diary"),e=w([{title:"홈",to:"/community",key:"home"},{title:"마음일기",to:"/community/diary",key:"diary"},{title:"패밀리케어",to:"/community/familycare",key:"familycare"}]);return C(()=>{const l=i.path;return e.value.map(v=>v.to).includes(l)}),(l,m)=>(n(),B(Z,{"has-search":!0,"page-title":"건신 커뮤니티",onSearch:l.handleSearch},{default:T(()=>[u(ee,{"active-key":s.value,tabs:e.value},null,8,["active-key","tabs"]),u(fe),u(De),m[0]||(m[0]=t("hr",{class:"hr-section mt-32 ml-n20 mr-n20"},null,-1)),u(He),m[1]||(m[1]=t("hr",{class:"hr-section mt-32 ml-n20 mr-n20"},null,-1)),u(ut),u(_t)]),_:1,__:[0,1]},8,["onSearch"]))}});export{Pt as default};
