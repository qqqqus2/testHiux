import{H as G}from"./kYhlhnVA.js";import{g as D,r as y,z as S,e as J,o as d,a7 as K,c,p as T,n as B,a as s,t as k,b as E,_,k as $,a4 as Q,u as F,F as x,h as W,d as X,m as Z,a1 as ee}from"./D3dCSwSP.js";const te={class:"c-modal-inner"},oe={class:"c-modal-header"},le={id:"modalBottomTitle",class:"c-modal-title"},ae={class:"c-modal-body"},ne={class:"c-modal-footer"},ie=["disabled"],se={class:"text"},ue=["disabled"],re={class:"text"},de=D({__name:"TimePickerModal",props:{isVisible:{type:Boolean,default:!1},title:{default:"시간 선택"},isShowCloseButton:{type:Boolean,default:!0},isShowCancelButton:{type:Boolean,default:!0},isShowConfirmButton:{type:Boolean,default:!0},confirmButtonText:{default:"확인"},cancelButtonText:{default:"취소"},disabledCancelButton:{type:Boolean,default:!1},disabledConfirmButton:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!1},initialDate:{default:null},showTimePicker:{type:Boolean,default:!0},defaultHour:{default:9},defaultMinute:{default:0},minuteStep:{default:1},scheduled:{},hourOnly:{type:Boolean,default:!1}},emits:["cancel","confirm","close","scheduled-date-click"],setup(t,{emit:I}){const o=t,v=I,b=y(),u=y({hour:o.defaultHour,minute:o.defaultMinute}),m=y(o.disabledCancelButton),f=y(o.disabledConfirmButton);S(()=>o.disabledCancelButton,a=>{m.value=a}),S(()=>o.disabledConfirmButton,a=>{f.value=a});const p=()=>{v("cancel"),v("close")},M=()=>{const a=new Date,h=new Date(a.getFullYear(),a.getMonth(),a.getDate(),u.value.hour,o.hourOnly?0:u.value.minute);v("confirm",h),o.autoClose&&v("close")},w=a=>{u.value=a};return(a,h)=>(d(),J(K,{to:"body"},[a.isVisible?(d(),c("div",{key:0,id:"cDatePicker",class:B(["c-modal bottom date-modal",[{"is-show":a.isVisible}]]),"aria-describedby":"modalBottomTitle",tabindex:"-1",role:"dialog","aria-modal":"true"},[s("div",{class:"c-dim",onClick:p}),s("div",te,[s("div",oe,[s("strong",le,k(a.title),1),a.isShowCloseButton?(d(),c("button",{key:0,type:"button",class:"c-modal-close-btn","aria-label":"닫기",onClick:p},h[1]||(h[1]=[s("i",{class:"icon close"},null,-1)]))):T("",!0)]),s("div",ae,[E(G,{ref_key:"hourMinRollSelecterRef",ref:b,modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=C=>u.value=C),"min-hour":0,"max-hour":23,"minute-step":a.minuteStep,"default-hour":a.defaultHour,"default-minute":a.defaultMinute,"hour-only":a.hourOnly,onChange:w},null,8,["modelValue","minute-step","default-hour","default-minute","hour-only"])]),s("div",ne,[a.isShowCancelButton?(d(),c("button",{key:0,type:"button",class:"c-modal-btn cancel",disabled:m.value,onClick:p},[s("span",se,k(a.cancelButtonText),1)],8,ie)):T("",!0),a.isShowConfirmButton?(d(),c("button",{key:1,type:"button",class:"c-modal-btn confirm",disabled:f.value,onClick:M},[s("span",re,k(a.confirmButtonText),1)],8,ue)):T("",!0)])])],2)):T("",!0)]))}}),ce=_(de,[["__scopeId","data-v-36a68be9"]]),me={class:"c-input"},fe={class:"c-inpType"},pe=["for"],ve={key:0,class:"required-mark"},he={key:1},ye=["id","name","placeholder","value","readonly","disabled"],be=["id","name","placeholder","value","readonly","disabled"],Te={key:1,class:"feedback error"},ke={class:"text"},Ce={key:2,class:"feedback error"},ge=D({__name:"InputClockFromTo",props:{label:{type:String,default:""},name:{type:String,default:"clockRange"},labelClass:{type:String,default:""},labelSize:{type:String,default:""},placeholder:{type:String,default:"HH:MM"},placeholder2:{type:String,default:"HH:MM"},fromTime:{type:String,default:""},toTime:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},size:{type:String,validator:t=>["lg","sm","normal"].includes(t),default:"normal"},validText:{type:String,default:"시간을 선택해주세요"},defaultFromHour:{type:Number,default:9,validator:t=>t>=0&&t<=23},defaultFromMinute:{type:Number,default:0,validator:t=>t>=0&&t<=59},defaultToHour:{type:Number,default:18,validator:t=>t>=0&&t<=23},defaultToMinute:{type:Number,default:0,validator:t=>t>=0&&t<=59},minuteStep:{type:Number,default:1,validator:t=>t>0&&t<=60},hourOnly:{type:Boolean,default:!1}},emits:["update:fromTime","update:toTime","validation-error","time-change"],setup(t,{emit:I}){const o=t,v=I,b=o.name,u=y("from"),m=y(o.fromTime),f=y(o.toTime),p=y(!1),M=$(()=>o.label.includes("*")),w=$(()=>M.value?o.label.split(/([*])/).filter(e=>e!==""):[]);S(()=>o.fromTime,e=>{m.value=e},{immediate:!0}),S(()=>o.toTime,e=>{f.value=e},{immediate:!0});const a=e=>{if(!e)return null;try{const l=e.match(/^(오전|오후)\s+(\d{1,2}):(\d{2})$/);if(l){const i=l[1];let r=parseInt(l[2]);const g=parseInt(l[3]);return i==="오후"&&r!==12?r+=12:i==="오전"&&r===12&&(r=0),{hour:r,minute:g}}const n=e.match(/^(\d{1,2}):(\d{2})$/);if(n){const i=parseInt(n[1]),r=parseInt(n[2]);return{hour:i,minute:r}}return null}catch{return null}},h=(e,l)=>{const n=e>=12?"오후":"오전";let i=e%12;i===0&&(i=12);const r=String(i).padStart(2,"0"),g=o.hourOnly?"00":String(l).padStart(2,"0");return`${n} ${r}:${g}`},C=$(()=>{if(!m.value||!f.value)return!1;const e=a(m.value),l=a(f.value);if(!e||!l)return!1;const n=e.hour*60+e.minute,i=l.hour*60+l.minute;return n>i}),H=(e,l)=>{if(!e||!l)return!0;const n=a(e),i=a(l);if(!n||!i)return!0;const r=n.hour*60+n.minute,g=i.hour*60+i.minute,O=r<=g;return O||v("validation-error","시작 시간이 종료 시간보다 늦을 수 없습니다"),O},q=$(()=>({title:u.value==="from"?"시작 시간":"종료 시간",isShowCloseButton:!0,isShowCancelButton:!0,isShowConfirmButton:!0,confirmButtonText:"확인",cancelButtonText:"취소",disabledCancelButton:!1,disabledConfirmButton:!1,autoClose:!1,defaultHour:u.value==="from"?o.defaultFromHour:o.defaultToHour,defaultMinute:u.value==="from"?o.defaultFromMinute:o.defaultToMinute,minuteStep:o.minuteStep,hourOnly:o.hourOnly,showTimePicker:!0})),P=e=>{m.value=e,v("update:fromTime",e),f.value&&H(e,f.value)},V=e=>{f.value=e,v("update:toTime",e),m.value&&H(m.value,e)},L=e=>{const n=e.target.value;P(n)},U=e=>{const n=e.target.value;V(n)},z=()=>{o.disabled||o.readonly||(u.value="from",R())},N=()=>{o.disabled||o.readonly||(u.value="to",R())},R=()=>{p.value=!p.value},Y=()=>{p.value=!1},j=()=>{p.value=!1},A=async e=>{if(!e){console.log("❌ 시간이 선택되지 않았습니다");return}const l=e.getHours(),n=o.hourOnly?0:e.getMinutes(),i=h(l,n);u.value==="from"?P(i):V(i),v("time-change",{field:u.value,hour:l,minute:n}),p.value=!1,await ee(),console.log(`⏰ ${u.value==="from"?"시작 시간":"종료 시간"} 선택: ${i}`),console.log("⏰ 시간:",l,"시",n,"분"),console.log("⏰ 내부 상태 - From:",m.value,"To:",f.value);const r=document.getElementById(u.value==="from"?b:`${b}-to`);r&&console.log(`⏰ Input 요소 값: ${r.value}`)};return S([m,f],([e,l])=>{e&&l&&H(e,l)}),(e,l)=>(d(),c("div",me,[s("div",fe,[t.label?(d(),c("label",{key:0,for:F(b),class:B(["c-label",t.labelClass]),style:Q({fontSize:t.labelSize})},[M.value?(d(!0),c(x,{key:0},W(w.value,(n,i)=>(d(),c("span",{key:i},[n==="*"?(d(),c("span",ve,"*")):(d(),c("span",he,k(n),1))]))),128)):(d(),c(x,{key:1},[X(k(t.label),1)],64))],14,pe)):T("",!0),s("div",{class:B(["c-inp-el",{lg:o.size==="lg",sm:o.size==="sm"}])},[s("input",{id:F(b),name:t.name,placeholder:t.placeholder,value:m.value,readonly:t.readonly,disabled:t.disabled,class:B(["c-inp",e.$attrs.class,{"is-invalid":t.isInvalid||C.value,active:u.value==="from"}]),onInput:L,onClick:z},null,42,ye),s("button",{class:"customClock",onClick:z}),l[0]||(l[0]=s("span",{class:"wave-txt"},"~",-1)),s("input",{id:`${F(b)}-to`,name:`${t.name}-to`,placeholder:t.placeholder2,value:f.value,readonly:t.readonly,disabled:t.disabled,class:B(["c-inp",e.$attrs.class,{"is-invalid":t.isInvalid||C.value,active:u.value==="to"}]),onInput:U,onClick:N},null,42,be),s("button",{class:"customClock",onClick:N})],2),t.isInvalid?(d(),c("p",Te,[s("span",ke,k(t.validText),1)])):T("",!0),C.value?(d(),c("p",Ce,l[1]||(l[1]=[s("span",{class:"text"},"시작 시간이 종료 시간보다 늦을 수 없습니다",-1)]))):T("",!0)]),E(ce,Z({"is-visible":p.value},q.value,{onCancel:j,onConfirm:A,onClose:Y}),null,16,["is-visible"])]))}}),Me=_(ge,[["__scopeId","data-v-68c36207"]]);export{Me as I,ce as T};
