import{g as X,r as h,k as h2,x as d2,a7 as p2,c as z,o as S,a as F,d as e2,t as g2,_ as s2,b as L,w as W,F as v2,h as C2,e as a2}from"./CbJ3mJef.js";import{p as m2}from"./DCDUePuQ.js";import{F as x2}from"./DoCtR7Ci.js";import{F as y2}from"./Cqbi5MNc.js";import{C as w2,a as _2}from"./bsqT8cQh.js";import{_ as M2}from"./C8HGqZrx.js";import"./DaPx7ns-.js";const H="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M26%2014C26%2020.6274%2020.6274%2026%2014%2026C7.37258%2026%202%2020.6274%202%2014C2%207.37258%207.37258%202%2014%202C20.6274%202%2026%207.37258%2026%2014Z'%20fill='%23C4D6FF'/%3e%3cpath%20d='M23.8182%2014C23.8182%208.57757%2019.4224%204.18182%2014%204.18182C8.57757%204.18182%204.18182%208.57757%204.18182%2014C4.18182%2019.4224%208.57757%2023.8182%2014%2023.8182V26C7.37258%2026%202%2020.6274%202%2014C2%207.37258%207.37258%202%2014%202C20.6274%202%2026%207.37258%2026%2014C26%2020.6274%2020.6274%2026%2014%2026V23.8182C19.4224%2023.8182%2023.8182%2019.4224%2023.8182%2014Z'%20fill='white'/%3e%3cpath%20d='M19.9908%2012.8052C20.0507%2012.4907%2019.8109%2012.1134%2019.5111%2012.1134L16.0938%2011.6103L14.535%208.34019C14.475%208.21442%2014.4151%208.15153%2014.2951%208.08864C13.9954%207.89998%2013.6357%208.02575%2013.4558%208.34019L11.9569%2011.6103L8.53958%2012.1134C8.35972%2012.1134%208.23982%2012.1763%208.17986%2012.3021C7.94005%2012.5536%207.94005%2012.9309%208.17986%2013.1825L10.638%2015.6979L10.0384%2019.2825C10.0384%2019.4083%2010.0384%2019.534%2010.0984%2019.6598C10.2782%2019.9742%2010.638%2020.1%2010.9377%2019.9114L13.9954%2018.2134L17.053%2019.9114C17.113%2019.9742%2017.2329%2019.9742%2017.3528%2019.9742C17.4127%2019.9742%2017.4127%2019.9742%2017.4727%2019.9742C17.7725%2019.9114%2018.0123%2019.5969%2017.9523%2019.2196L17.3528%2015.6351L19.8109%2013.1196C19.9308%2013.0567%2019.9908%2012.9309%2019.9908%2012.8052Z'%20fill='%234C7FF7'/%3e%3c/svg%3e",$="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M26%2014C26%2020.6274%2020.6274%2026%2014%2026C7.37258%2026%202%2020.6274%202%2014C2%207.37258%207.37258%202%2014%202C20.6274%202%2026%207.37258%2026%2014Z'%20fill='%23FFF2BD'/%3e%3cpath%20d='M23.8182%2014C23.8182%208.57757%2019.4224%204.18182%2014%204.18182C8.57757%204.18182%204.18182%208.57757%204.18182%2014C4.18182%2019.4224%208.57757%2023.8182%2014%2023.8182V26C7.37258%2026%202%2020.6274%202%2014C2%207.37258%207.37258%202%2014%202C20.6274%202%2026%207.37258%2026%2014C26%2020.6274%2020.6274%2026%2014%2026V23.8182C19.4224%2023.8182%2023.8182%2019.4224%2023.8182%2014Z'%20fill='white'/%3e%3cpath%20d='M19.9908%2012.8052C20.0507%2012.4907%2019.8109%2012.1134%2019.5111%2012.1134L16.0938%2011.6103L14.535%208.34019C14.475%208.21442%2014.4151%208.15153%2014.2951%208.08864C13.9954%207.89998%2013.6357%208.02575%2013.4558%208.34019L11.9569%2011.6103L8.53958%2012.1134C8.35972%2012.1134%208.23982%2012.1763%208.17986%2012.3021C7.94005%2012.5536%207.94005%2012.9309%208.17986%2013.1825L10.638%2015.6979L10.0384%2019.2825C10.0384%2019.4083%2010.0384%2019.534%2010.0984%2019.6598C10.2782%2019.9742%2010.638%2020.1%2010.9377%2019.9114L13.9954%2018.2134L17.053%2019.9114C17.113%2019.9742%2017.2329%2019.9742%2017.3528%2019.9742C17.4127%2019.9742%2017.4127%2019.9742%2017.4727%2019.9742C17.7725%2019.9114%2018.0123%2019.5969%2017.9523%2019.2196L17.3528%2015.6351L19.8109%2013.1196C19.9308%2013.0567%2019.9908%2012.9309%2019.9908%2012.8052Z'%20fill='%23FBBC00'/%3e%3c/svg%3e",F2="data:image/svg+xml,%3csvg%20width='46'%20height='24'%20viewBox='0%200%2046%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='46'%20height='24'%20rx='12'%20fill='%23535E5A'/%3e%3cpath%20d='M15.684%2012.792H17.154V14.682H15.684V12.792ZM10.658%2011.938H22.194V13.03H10.658V11.938ZM15.684%206.31H17.14V7.85H15.684V6.31ZM15.614%207.962H16.902V8.186C16.902%208.67133%2016.7713%209.10533%2016.51%209.488C16.258%209.86133%2015.8987%2010.188%2015.432%2010.468C14.9653%2010.748%2014.4053%2010.972%2013.752%2011.14C13.108%2011.2987%2012.394%2011.406%2011.61%2011.462L11.19%2010.37C11.89%2010.3327%2012.5107%2010.2533%2013.052%2010.132C13.5933%2010.0107%2014.0553%209.85667%2014.438%209.67C14.8207%209.474%2015.11%209.25%2015.306%208.998C15.5113%208.746%2015.614%208.47533%2015.614%208.186V7.962ZM15.936%207.962H17.224V8.186C17.224%208.47533%2017.322%208.746%2017.518%208.998C17.7233%209.25%2018.0127%209.474%2018.386%209.67C18.7687%209.85667%2019.2307%2010.0107%2019.772%2010.132C20.3227%2010.2533%2020.948%2010.3327%2021.648%2010.37L21.228%2011.462C20.4347%2011.406%2019.716%2011.2987%2019.072%2011.14C18.428%2010.972%2017.8727%2010.748%2017.406%2010.468C16.9393%2010.188%2016.5753%209.86133%2016.314%209.488C16.062%209.10533%2015.936%208.67133%2015.936%208.186V7.962ZM11.792%207.416H21.06V8.508H11.792V7.416ZM12.002%2014.024H20.752V16.978H13.472V18.378H12.03V15.97H19.31V15.088H12.002V14.024ZM12.03%2017.944H21.116V19.036H12.03V17.944ZM23.6909%206.898H25.1469V8.592H28.2689V6.898H29.7249V12.484H23.6909V6.898ZM25.1469%209.712V11.336H28.2689V9.712H25.1469ZM31.7689%206.366H33.2249V12.918H31.7689V6.366ZM32.6229%208.984H35.0309V10.188H32.6229V8.984ZM24.9649%2013.478H33.2249V16.754H26.4349V18.49H24.9929V15.676H31.7829V14.612H24.9649V13.478ZM24.9929%2017.888H33.6449V19.036H24.9929V17.888Z'%20fill='white'/%3e%3c/svg%3e",t2=""+new URL("img-walkking-point-goal.CCfHelOb.svg",import.meta.url).href,b2=""+new URL("img-walkking-point-gift.DuTH2rEF.svg",import.meta.url).href,k2="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='1'%20y='1'%20width='38'%20height='38'%20rx='19'%20fill='white'/%3e%3crect%20x='1'%20y='1'%20width='38'%20height='38'%20rx='19'%20stroke='%234C7FF7'%20stroke-width='2'/%3e%3cpath%20d='M26.3996%2015.2002L16.8536%2024.8002L13.5996%2021.5278'%20stroke='%234C7FF7'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",V2={class:"chellenge-steps-wrap"},H2=["width","height"],P2={class:"steps-info"},S2={class:"total-steps"},P=5e5,L2=40,I2=X({__name:"ChallengeSteps",emits:["milestoneClick"],setup(U,{emit:x}){const I=x,u=h(),C=h(335),y=h(430);let q=335,G=430;const b=h(17e4),Z=h([]),r=h({}),R=h(0),O=h(!1),B=h(new Set),w=h(new Map),A=[F2,H,$,H,$,H,t2],k=e=>new Promise((s,i)=>{const a=new Image;a.onload=()=>s(a),a.onerror=i,a.src=e}),o2=async()=>{try{r.value.milestone_blue=await k(H),r.value.milestone_gift=await k(b2),r.value.milestone_complete=await k(k2),r.value.profile=await k(m2)}catch(e){console.error("Image preload error",e)}for(let e=0;e<A.length;e++){const s=A[e];if(s)try{r.value[`milestone_${e}`]=await k(s)}catch(i){console.error(`Failed to load image for milestone ${e}:`,i)}}_()};h2(()=>Math.round(b.value/P*100));const N=()=>{const e=C.value/q,s=y.value/G,i=167.5,a=0;return[{steps:0,label:"출발",x:207,y:385},{steps:7e4,label:"7만보",x:40,y:340},{steps:15e4,label:"15만보",x:295,y:285},{steps:25e4,label:"25만보",x:40,y:230},{steps:35e4,label:"35만보",x:295,y:175},{steps:45e4,label:"45만보",x:40,y:120},{steps:5e5,label:"골!",x:166,y:70}].map(l=>({...l,x:l.x<i?(l.x+a)*e:(l.x-a)*e,y:l.y*s}))},l2=e=>{const s=N();if(e>=P){const i=s[s.length-1];return{x:i.x,y:i.y}}for(let i=1;i<s.length;i++){const a=s[i-1],n=s[i];if(e>=a.steps&&e<=n.steps){const l=(e-a.steps)/(n.steps-a.steps),t=n.x-a.x,o=n.y-a.y,c=Math.hypot(t,o),p=t/(c||1),T=o/(c||1),d=10,V=a.x+p*d,M=a.y+T*d,E=n.x-p*d,m=n.y-T*d;return{x:V+(E-V)*l,y:M+(m-M)*l}}}return{x:s[0].x,y:s[0].y}},n2=()=>{const s=Date.now();O.value=!0;const i=()=>{const a=Math.min((Date.now()-s)/500,1),n=a<.5?2*a*a:1-Math.pow(-2*a+2,3)/2;R.value=n,_(),a<1?requestAnimationFrame(i):O.value=!1};requestAnimationFrame(i)},i2=()=>{const e=()=>{let s=!1;const i=Date.now();for(const[,a]of w.value.entries()){const n=Math.min((i-a.startTime)/300,1);if(n<=.5){const l=n/.5;a.scale=1+l*.5,a.opacity=1,a.offsetY=0}else{const l=(n-.5)/.5;a.scale=1.5-l*.3,a.opacity=1-l,a.offsetY=-l*20}s=!0}_(),s&&requestAnimationFrame(e)};requestAnimationFrame(e)};function J(e,s,i){if(s.length<2)return;e.beginPath(),e.moveTo(s[0].x,s[0].y);for(let n=1;n<s.length-1;n++){const l=s[n],t=s[n+1];e.lineTo(l.x,l.y),e.arcTo(l.x,l.y,t.x,t.y,i)}const a=s[s.length-1];e.lineTo(a.x,a.y)}const _=()=>{if(!u.value)return;const e=u.value.getContext("2d");if(!e)return;e.clearRect(0,0,C.value,y.value);const s=N();e.lineWidth=10,e.lineCap="round",e.lineJoin="round",e.strokeStyle="rgba(255,255,255,0.7)",e.lineWidth=10,e.lineCap="round",e.lineJoin="round";const i=s.map(t=>({x:t.x,y:t.y}));J(e,i,28),e.stroke(),e.strokeStyle="#4C7FF7";const a=Math.min(b.value,P),n=[];for(let t=0;t<s.length;t++){const o=s[t];if(a>=o.steps)n.push({x:o.x,y:o.y});else{if(t>0){const c=s[t-1],p=(a-c.steps)/(o.steps-c.steps);p>0&&n.push({x:c.x+(o.x-c.x)*p,y:c.y+(o.y-c.y)*p})}break}}n.length>=2&&(J(e,n,28),e.stroke()),Z.value=[],s.forEach((t,o)=>{const c=o===0,p=o===s.length-1,d=Math.min(b.value,P)>=t.steps,V=B.value.has(o),M=d&&!c&&!p&&!V,E=V&&!c&&!p;let m;E?m="milestone_complete":M?m="milestone_gift":m=`milestone_${o}`;const u2=r.value[m]||r.value[`milestone_${o}`];if(M&&Z.value.push({x:t.x,y:t.y,radius:24,milestone:t,index:o,isPassed:d}),u2)if(p){e.save(),e.beginPath(),e.arc(t.x,t.y,17,0,Math.PI*2),e.clip(),r.value.milestone_blue&&e.drawImage(r.value.milestone_blue,t.x-17,t.y-17,17*2,17*2),e.restore(),e.beginPath(),e.arc(t.x,t.y,17,0,Math.PI*2),e.strokeStyle=d?"#4C7FF7":"#E0E0E0",e.lineWidth=3,e.stroke();const f=33;e.drawImage(r.value[m],t.x-f/4,t.y-48,f,f)}else if(E){e.drawImage(r.value.milestone_complete,t.x-32/2,t.y-32/2,32,32);const v=w.value.get(o);if(v){e.save(),e.globalAlpha=v.opacity;const K=48*v.scale,Q=48*v.scale,f2=t.y+v.offsetY;e.drawImage(r.value.milestone_gift,t.x-K/2,f2-Q/2,K,Q),e.restore()}}else if(M)e.drawImage(r.value[m],t.x-48/2,t.y-48/2,48,48);else{const f=c?51:34,g=c?29:34;e.save(),c||(e.beginPath(),e.arc(t.x,t.y,f/2,0,Math.PI*2),e.clip()),e.drawImage(r.value[m],t.x-f/2,t.y-g/2,f,g),e.restore(),c||(e.beginPath(),e.arc(t.x,t.y,f/2,0,Math.PI*2),e.strokeStyle=d?"#4C7FF7":"#E0E0E0",e.lineWidth=3,e.stroke())}else e.beginPath(),e.arc(t.x,t.y,12,0,Math.PI*2),e.fillStyle=d?"#4C7FF7":"#FFFFFF",e.fill(),e.strokeStyle=d?"#4C7FF7":"#E0E0E0",e.lineWidth=2,e.stroke();if(o!==0){e.font="700 13px sans-serif",e.fillStyle="#555";const Y=Math.ceil(t.steps/(P/L2)),j=`${t.steps.toLocaleString()}걸음 / ${Y}일`,f=A[o];let g=t.x,v="center";f===H?(g=t.x+35,v="left"):f===$?(g=t.x-35,v="right"):f===t2&&(g=t.x+20,v="left"),e.textAlign=v,e.fillText(j,g,t.y+5)}});const l=l2(b.value);if(R.value>0){const t=17*R.value,o=30*R.value;e.beginPath(),e.arc(l.x,l.y,t,0,Math.PI*2),e.fillStyle="#4C7FF7",e.fill(),e.strokeStyle="#FFFFFF",e.lineWidth=2,e.stroke(),r.value.profile&&o>0&&(e.save(),e.beginPath(),e.arc(l.x,l.y,o/2,0,Math.PI*2),e.clip(),e.drawImage(r.value.profile,l.x-o/2,l.y-o/2,o,o),e.restore())}},c2=e=>{if(!u.value)return;const s=u.value.getBoundingClientRect(),i=C.value/s.width,a=y.value/s.height,n=(e.clientX-s.left)*i,l=(e.clientY-s.top)*a;for(const t of Z.value)if(Math.hypot(n-t.x,l-t.y)<=t.radius){!B.value.has(t.index)&&!w.value.has(t.index)&&(B.value.add(t.index),w.value.set(t.index,{startTime:Date.now(),scale:1,opacity:1,offsetY:0}),I("milestoneClick",{steps:t.milestone.steps,label:t.milestone.label,index:t.index}),setTimeout(()=>{w.value.delete(t.index),_()},300),i2());break}},r2=e=>{if(!u.value)return;const s=u.value.getBoundingClientRect(),i=C.value/s.width,a=y.value/s.height,n=(e.clientX-s.left)*i,l=(e.clientY-s.top)*a;let t=!1;for(const o of Z.value)if(Math.hypot(n-o.x,l-o.y)<=o.radius&&!B.value.has(o.index)&&!w.value.has(o.index)){t=!0;break}u.value.style.cursor=t?"pointer":"default"},D=()=>{var s;const e=(s=u.value)==null?void 0:s.parentElement;e&&(e.clientWidth,e.clientHeight,q=335,G=430,C.value=335,y.value=430,setTimeout(()=>_(),0))};return d2(async()=>{D(),_(),window.addEventListener("resize",D),await o2(),setTimeout(()=>n2(),1e3)}),p2(()=>{window.removeEventListener("resize",D)}),(e,s)=>(S(),z("section",V2,[F("canvas",{ref_key:"canvasRef",ref:u,width:C.value,height:y.value,class:"challenge-canvas",onClick:c2,onMousemove:r2},null,40,H2),F("div",P2,[s[1]||(s[1]=F("div",{class:"date"},[F("strong",null,"8"),e2("일")],-1)),F("div",S2,[F("strong",null,g2(b.value.toLocaleString()),1),s[0]||(s[0]=e2("걸음 "))])])]))}}),Z2=s2(I2,[["__scopeId","data-v-f13fa8c1"]]),R2={class:"profile-wrap"},B2=X({__name:"IntervalMissionProfile",props:{profileData:{},stepsData:{}},setup(U){return(x,I)=>(S(),z("div",R2,[L(x2,{class:"mt-n32"},{default:W(()=>[L(w2,{"profile-data":x.profileData},null,8,["profile-data"])]),_:1}),L(y2,{class:"gap-8 mt-18"},{default:W(()=>[(S(!0),z(v2,null,C2(x.stepsData,(u,C)=>(S(),a2(_2,{key:C,title:u.title,steps:u.steps,type:u.type},null,8,["title","steps","type"]))),128))]),_:1})]))}}),E2=s2(B2,[["__scopeId","data-v-3dae0ff0"]]),q2=X({__name:"individualChallengeInProgressSegmentMissionAType1",setup(U){const x=h({rankUp:!0,rank:"121",name:"장동건",location:"서울강남",reward:12,currentRank:"138"}),I=h([{title:"건강걸음",steps:"954,298",type:""},{title:"플러스걸음",steps:"26,300",type:""},{title:"총 걸음",steps:"980,589",type:"total"}]);return(u,C)=>(S(),a2(M2,{"has-share-type2":!0,"page-title":"16th 하이워킹 챌린지 하프 마라 하이워킹 챌린지 하프 마라 하이워킹 챌린지 하프 마라","show-back-button":!0,"is-transparent":!0,"has-add-text":!0,"add-text-click-enabled":!0,"add-text":"<span class='icon ico-menu'>메뉴 아이콘</span>"},{default:W(()=>[L(Z2),L(E2,{"profile-data":x.value,"steps-data":I.value},null,8,["profile-data","steps-data"])]),_:1}))}});export{q2 as default};
