import{g as ve,r,k as T,s as ce,a1 as de,z as me,c as x,o as p,a as I,p as fe,a4 as j,F as J,h as K,n as Q,t as W,_ as he}from"./D3dCSwSP.js";/* empty css        */const ge={class:"hour-min-roll-selector"},Me={class:"time-section"},Ye={key:0,class:"time-section"},u=40,Te=ve({__name:"HourMinRollSelecter",props:{modelValue:{default:()=>({hour:9,minute:0})},minHour:{default:0},maxHour:{default:23},minuteStep:{default:1},defaultHour:{default:9},defaultMinute:{default:0},hourOnly:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(X,{expose:Z,emit:_}){var R,U;const o=X,F=_,ee=r(),te=r(),l=r(0),s=r(0),d=r(!1),m=r(!1),S=r(0),H=r(0),D=r(0),O=r(0),f=r(((R=o.modelValue)==null?void 0:R.hour)??o.defaultHour),h=r(((U=o.modelValue)==null?void 0:U.minute)??o.defaultMinute),i=T(()=>{const t=[];for(let e=o.minHour;e<=o.maxHour;e++)t.push(e);return t}),v=T(()=>{const t=[];for(let e=0;e<60;e+=o.minuteStep)t.push(e);return t}),ne=T(()=>i.value.findIndex(t=>t===f.value)),ae=T(()=>v.value.findIndex(t=>t===h.value)),C=T(()=>{const e=-(i.value.length-1)*u,n=Math.max(e,Math.min(0,l.value));return Math.round(-n/u)}),y=T(()=>{const e=-(v.value.length-1)*u,n=Math.max(e,Math.min(0,s.value));return Math.round(-n/u)}),B=t=>{if(t==="hour"){const e=C.value;if(e>=0&&e<i.value.length){const n=i.value[e];n!==f.value&&(f.value=n,E())}}else{const e=y.value;if(e>=0&&e<v.value.length){const n=v.value[e];n!==h.value&&(h.value=n,E())}}},E=()=>{const t={hour:f.value,minute:o.hourOnly?0:h.value};F("update:modelValue",t),F("change",t),console.log(`⏰ 선택된 시간: ${String(f.value).padStart(2,"0")}:${String(o.hourOnly?0:h.value).padStart(2,"0")}`)},V=t=>{const e=t==="hour",n=e?l.value:s.value,a=e?i.value:v.value,c=Math.round(-n/u),g=-Math.max(0,Math.min(a.length-1,c))*u,Y=n,M=g-Y,ue=200,le=performance.now(),G=se=>{const re=se-le,L=Math.min(re/ue,1),ie=1-Math.pow(1-L,3),P=Y+M*ie;e?l.value=P:s.value=P,L<1?requestAnimationFrame(G):(e?l.value=g:s.value=g,B(t))};requestAnimationFrame(G)},$=(t,e)=>{const n=e==="hour"?i.value:v.value,a=0,c=-(n.length-1)*u;return Math.max(c,Math.min(a,t))},z=(t,e)=>{e==="hour"?(d.value=!0,S.value=t.touches[0].clientY,D.value=l.value):(m.value=!0,H.value=t.touches[0].clientY,O.value=s.value)},N=(t,e)=>{if(!(e==="hour"?d.value:m.value))return;t.preventDefault();const a=t.touches[0].clientY,c=e==="hour"?S.value:H.value,w=e==="hour"?D.value:O.value,g=a-c,Y=w+g,M=$(Y,e);e==="hour"?l.value=M:s.value=M,B(e)},b=t=>{(t==="hour"?d.value:m.value)&&(t==="hour"?d.value=!1:m.value=!1,V(t))},q=(t,e)=>{e==="hour"?(d.value=!0,S.value=t.clientY,D.value=l.value):(m.value=!0,H.value=t.clientY,O.value=s.value),t.preventDefault()},A=(t,e)=>{if(!(e==="hour"?d.value:m.value))return;const a=t.clientY,c=e==="hour"?S.value:H.value,w=e==="hour"?D.value:O.value,g=a-c,Y=w+g,M=$(Y,e);e==="hour"?l.value=M:s.value=M,B(e)},k=t=>{(t==="hour"?d.value:m.value)&&(t==="hour"?d.value=!1:m.value=!1,V(t))},oe=(t,e)=>{f.value=t,o.hourOnly||(h.value=e);const n=i.value.findIndex(a=>a===t);if(n!==-1&&(l.value=-n*u),!o.hourOnly){const a=v.value.findIndex(c=>c===e);a!==-1&&(s.value=-a*u)}E()};return ce(()=>{de(()=>{const t=ne.value;if(l.value=-t*u,!o.hourOnly){const e=ae.value;s.value=-e*u}})}),me(()=>o.modelValue,t=>{if(t&&(t.hour!==f.value||!o.hourOnly&&t.minute!==h.value)){f.value=t.hour,o.hourOnly||(h.value=t.minute);const e=i.value.findIndex(n=>n===t.hour);if(e!==-1&&(l.value=-e*u),!o.hourOnly){const n=v.value.findIndex(a=>a===t.minute);n!==-1&&(s.value=-n*u)}}},{deep:!0,immediate:!0}),Z({setTime:oe}),(t,e)=>(p(),x("div",ge,[I("div",Me,[I("div",{ref_key:"hourContainer",ref:ee,class:"roll-container"},[I("div",{class:"roll-wheel",style:j({transform:`translateY(${l.value}px)`}),onTouchstart:e[0]||(e[0]=n=>z(n,"hour")),onTouchmove:e[1]||(e[1]=n=>N(n,"hour")),onTouchend:e[2]||(e[2]=()=>b("hour")),onMousedown:e[3]||(e[3]=n=>q(n,"hour")),onMousemove:e[4]||(e[4]=n=>A(n,"hour")),onMouseup:e[5]||(e[5]=()=>k("hour")),onMouseleave:e[6]||(e[6]=()=>k("hour"))},[(p(!0),x(J,null,K(i.value,(n,a)=>(p(),x("div",{key:n,class:Q(["roll-item",{active:a===C.value,fade:Math.abs(a-C.value)>1}])},W(String(n).padStart(2,"0"))+"시 ",3))),128))],36)],512)]),t.hourOnly?fe("",!0):(p(),x("div",Ye,[I("div",{ref_key:"minuteContainer",ref:te,class:"roll-container"},[I("div",{class:"roll-wheel",style:j({transform:`translateY(${s.value}px)`}),onTouchstart:e[7]||(e[7]=n=>z(n,"minute")),onTouchmove:e[8]||(e[8]=n=>N(n,"minute")),onTouchend:e[9]||(e[9]=()=>b("minute")),onMousedown:e[10]||(e[10]=n=>q(n,"minute")),onMousemove:e[11]||(e[11]=n=>A(n,"minute")),onMouseup:e[12]||(e[12]=()=>k("minute")),onMouseleave:e[13]||(e[13]=()=>k("minute"))},[(p(!0),x(J,null,K(v.value,(n,a)=>(p(),x("div",{key:n,class:Q(["roll-item",{active:a===y.value,fade:Math.abs(a-y.value)>1}])},W(String(n).padStart(2,"0"))+"분 ",3))),128))],36)],512)])),e[14]||(e[14]=I("div",{class:"selection-indicator"},null,-1))]))}}),Ie=he(Te,[["__scopeId","data-v-43caee3a"]]);export{Ie as H};
